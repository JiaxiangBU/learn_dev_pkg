<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R 开发包 Cookbook</title>
  <meta name="description" content="R 开发包 Cookbook" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="R 开发包 Cookbook" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R 开发包 Cookbook" />
  
  
  

<meta name="author" content="李家翔" />


<meta name="date" content="2020-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path=""><a href="#完成状态"><i class="fa fa-check"></i><b>1</b> 完成状态</a></li>
<li class="chapter" data-level="2" data-path=""><a href="#函数缺少引用"><i class="fa fa-check"></i><b>2</b> 函数缺少引用</a></li>
<li class="chapter" data-level="3" data-path=""><a href="#ignore-额外文件夹"><i class="fa fa-check"></i><b>3</b> ignore 额外文件夹</a></li>
<li class="chapter" data-level="4" data-path=""><a href="#使用-unicode"><i class="fa fa-check"></i><b>4</b> 使用 Unicode</a></li>
<li class="chapter" data-level="5" data-path=""><a href="#vignette-报错"><i class="fa fa-check"></i><b>5</b> vignette 报错</a></li>
<li class="chapter" data-level="6" data-path=""><a href="#use_package"><i class="fa fa-check"></i><b>6</b> use_package</a></li>
<li class="chapter" data-level="7" data-path=""><a href="#去除-library"><i class="fa fa-check"></i><b>7</b> 去除 library</a></li>
<li class="chapter" data-level="8" data-path=""><a href="#函数缺少描述"><i class="fa fa-check"></i><b>8</b> 函数缺少描述</a></li>
<li class="chapter" data-level="9" data-path=""><a href="#函数参数缺少描述"><i class="fa fa-check"></i><b>9</b> 函数参数缺少描述</a></li>
<li class="chapter" data-level="10" data-path=""><a href="#packrat-删除"><i class="fa fa-check"></i><b>10</b> packrat 删除</a></li>
<li class="chapter" data-level="11" data-path=""><a href="#去除-global-variables-的问题"><i class="fa fa-check"></i><b>11</b> 去除 global variables 的问题</a></li>
<li class="chapter" data-level="12" data-path=""><a href="#给函数加上包名"><i class="fa fa-check"></i><b>12</b> 给函数加上包名</a></li>
<li class="chapter" data-level="13" data-path=""><a href="#todos-进-commit"><i class="fa fa-check"></i><b>13</b> todos 进 commit</a></li>
<li class="chapter" data-level="14" data-path=""><a href="#news"><i class="fa fa-check"></i><b>14</b> 更新 NEWS.md</a></li>
<li class="chapter" data-level="15" data-path=""><a href="#cran-comments"><i class="fa fa-check"></i><b>15</b> CRAN Comments</a></li>
<li class="chapter" data-level="16" data-path=""><a href="#ignore-readme.rmd"><i class="fa fa-check"></i><b>16</b> Ignore README.Rmd</a></li>
<li class="chapter" data-level="17" data-path=""><a href="#update-desc"><i class="fa fa-check"></i><b>17</b> Update DESC</a></li>
<li class="chapter" data-level="18" data-path=""><a href="#保证-readme.rmd-链接都是有效的"><i class="fa fa-check"></i><b>18</b> 保证 README.Rmd 链接都是有效的</a></li>
<li class="chapter" data-level="19" data-path=""><a href="#add-examples-tests-and-vignettes"><i class="fa fa-check"></i><b>19</b> Add examples, tests, and vignettes</a></li>
<li class="chapter" data-level="20" data-path=""><a href="#release-函数的流程"><i class="fa fa-check"></i><b>20</b> release 函数的流程</a></li>
<li class="chapter" data-level="21" data-path=""><a href="#r-hub-通过示例"><i class="fa fa-check"></i><b>21</b> r-hub 通过示例</a></li>
<li class="chapter" data-level="22" data-path=""><a href="#上传成功后的邮件"><i class="fa fa-check"></i><b>22</b> 上传成功后的邮件</a></li>
<li class="chapter" data-level="23" data-path=""><a href="#包含其他文件在包中"><i class="fa fa-check"></i><b>23</b> 包含其他文件在包中</a></li>
<li class="chapter" data-level="24" data-path=""><a href="#好好写-description"><i class="fa fa-check"></i><b>24</b> 好好写 Description</a></li>
<li class="chapter" data-level="25" data-path=""><a href="#这个-warning-没有看懂"><i class="fa fa-check"></i><b>25</b> 这个 warning 没有看懂</a></li>
<li class="chapter" data-level="26" data-path=""><a href="#fix-mis-spelling"><i class="fa fa-check"></i><b>26</b> fix mis-spelling</a></li>
<li class="chapter" data-level="27" data-path=""><a href="#增加数据"><i class="fa fa-check"></i><b>27</b> 增加数据</a></li>
<li class="chapter" data-level="28" data-path=""><a href="#增加-examples"><i class="fa fa-check"></i><b>28</b> 增加 examples</a></li>
<li class="chapter" data-level="29" data-path=""><a href="#增加数据文档"><i class="fa fa-check"></i><b>29</b> 增加数据文档</a></li>
<li class="chapter" data-level="30" data-path=""><a href="#加入-r-版本"><i class="fa fa-check"></i><b>30</b> 加入 R 版本</a></li>
<li class="chapter" data-level="31" data-path=""><a href="#r-版本限制"><i class="fa fa-check"></i><b>31</b> R 版本限制</a></li>
<li class="chapter" data-level="32" data-path=""><a href="#查看-non-ascii-文本"><i class="fa fa-check"></i><b>32</b> 查看 non-ASCII 文本</a></li>
<li class="chapter" data-level="33" data-path=""><a href="#注意-non-acsii-在-rd-的出现"><i class="fa fa-check"></i><b>33</b> 注意 non-ACSII 在 Rd 的出现</a></li>
<li class="chapter" data-level="34" data-path=""><a href="#删除不用的包"><i class="fa fa-check"></i><b>34</b> 删除不用的包</a></li>
<li class="chapter" data-level="35" data-path=""><a href="#回复速度"><i class="fa fa-check"></i><b>35</b> 回复速度</a></li>
<li class="chapter" data-level="36" data-path=""><a href="#标题大小写问题"><i class="fa fa-check"></i><b>36</b> 标题大小写问题</a></li>
<li class="chapter" data-level="37" data-path=""><a href="#elaborate-description"><i class="fa fa-check"></i><b>37</b> elaborate Description</a></li>
<li class="chapter" data-level="38" data-path=""><a href="#标题特殊拼写处理"><i class="fa fa-check"></i><b>38</b> 标题特殊拼写处理</a></li>
<li class="chapter" data-level="39" data-path=""><a href="#失效的链接"><i class="fa fa-check"></i><b>39</b> 失效的链接</a></li>
<li class="chapter" data-level="40" data-path=""><a href="#bib-文件的位置"><i class="fa fa-check"></i><b>40</b> bib 文件的位置</a></li>
<li class="chapter" data-level="41" data-path=""><a href="#默认函数加上-import"><i class="fa fa-check"></i><b>41</b> 默认函数加上 import</a></li>
<li class="chapter" data-level="42" data-path=""><a href="#pending-a-manual-inspection"><i class="fa fa-check"></i><b>42</b> pending a manual inspection</a></li>
<li class="chapter" data-level="43" data-path=""><a href="#正确的doi书写"><i class="fa fa-check"></i><b>43</b> 正确的DOI书写</a></li>
<li class="chapter" data-level="44" data-path=""><a href="#vignette-yaml-报错"><i class="fa fa-check"></i><b>44</b> Vignette yaml 报错</a></li>
<li class="chapter" data-level="45" data-path=""><a href="#desc-避免使用双引号"><i class="fa fa-check"></i><b>45</b> DESC 避免使用双引号</a></li>
<li class="chapter" data-level="46" data-path=""><a href="#python-包也用单引号"><i class="fa fa-check"></i><b>46</b> Python 包也用单引号</a></li>
<li class="chapter" data-level="47" data-path=""><a href="#使用拼写检查就会产生test"><i class="fa fa-check"></i><b>47</b> 使用拼写检查就会产生test</a></li>
<li class="chapter" data-level="48" data-path=""><a href="#不要重复上传"><i class="fa fa-check"></i><b>48</b> 不要重复上传</a></li>
<li class="chapter" data-level="49" data-path=""><a href="#复制功能的取舍"><i class="fa fa-check"></i><b>49</b> 复制功能的取舍</a></li>
<li class="chapter" data-level="50" data-path=""><a href="#mis-spelling-arguement"><i class="fa fa-check"></i><b>50</b> mis-spelling arguement</a></li>
<li class="chapter" data-level="51" data-path=""><a href="#mis-spelling"><i class="fa fa-check"></i><b>51</b> mis-spelling</a></li>
<li class="chapter" data-level="52" data-path=""><a href="#子路径内存太大"><i class="fa fa-check"></i><b>52</b> 子路径内存太大</a></li>
<li class="chapter" data-level="53" data-path=""><a href="#函数说明不要太长"><i class="fa fa-check"></i><b>53</b> 函数说明不要太长</a></li>
<li class="chapter" data-level="54" data-path=""><a href="#更新-license-年份"><i class="fa fa-check"></i><b>54</b> 更新 LICENSE 年份</a></li>
<li class="chapter" data-level="55" data-path=""><a href="#合理写-title"><i class="fa fa-check"></i><b>55</b> 合理写 title</a></li>
<li class="chapter" data-level="56" data-path=""><a href="#写函数的-return"><i class="fa fa-check"></i><b>56</b> 写函数的 return</a></li>
<li class="chapter" data-level="57" data-path=""><a href="#增加-verbose"><i class="fa fa-check"></i><b>57</b> 增加 verbose</a></li>
<li class="chapter" data-level="58" data-path=""><a href="#missing-name-and-title"><i class="fa fa-check"></i><b>58</b> missing name and title</a></li>
<li class="chapter" data-level="59" data-path=""><a href="#warning-example-doesnt-exist"><i class="fa fa-check"></i><b>59</b> warning example doesn’t exist</a></li>
<li class="chapter" data-level="60" data-path=""><a href="#desc-不用-title-case"><i class="fa fa-check"></i><b>60</b> DESC 不用 title case</a></li>
<li class="chapter" data-level="61" data-path=""><a href="#github-等名字用引号括起来"><i class="fa fa-check"></i><b>61</b> GitHub 等名字用引号括起来</a></li>
<li class="chapter" data-level="62" data-path=""><a href="#外部文件如何写-vignette"><i class="fa fa-check"></i><b>62</b> 外部文件如何写 vignette</a></li>
<li class="chapter" data-level="63" data-path=""><a href="#dontrun-只用一个"><i class="fa fa-check"></i><b>63</b> dontrun 只用一个</a></li>
<li class="chapter" data-level="64" data-path=""><a href="#export-函数的要求"><i class="fa fa-check"></i><b>64</b> export 函数的要求</a></li>
<li class="chapter" data-level="65" data-path=""><a href="#xclip-的问题"><i class="fa fa-check"></i><b>65</b> xclip 的问题</a></li>
<li class="chapter" data-level="66" data-path=""><a href="#donttest"><i class="fa fa-check"></i><b>66</b> donttest</a></li>
<li class="chapter" data-level="67" data-path=""><a href="#addin-check-报错"><i class="fa fa-check"></i><b>67</b> addin check 报错</a></li>
<li class="chapter" data-level="68" data-path=""><a href="#example-和-vignette-写-library"><i class="fa fa-check"></i><b>68</b> example 和 vignette 写 library</a></li>
<li class="chapter" data-level="69" data-path=""><a href="#unable-to-verify-current-time"><i class="fa fa-check"></i><b>69</b> unable to verify current time</a></li>
<li class="chapter" data-level="70" data-path=""><a href="#打开-github-pages"><i class="fa fa-check"></i><b>70</b> 打开 GitHub Pages</a></li>
<li class="chapter" data-level="71" data-path=""><a href="#审核成功"><i class="fa fa-check"></i><b>71</b> 审核成功</a></li>
<li class="chapter" data-level="72" data-path=""><a href="#发布-r-cran-后续-workflow"><i class="fa fa-check"></i><b>72</b> 发布 R CRAN 后续 workflow</a></li>
<li class="chapter" data-level="73" data-path=""><a href="#str_right_space"><i class="fa fa-check"></i><b>73</b> str_right_space</a></li>
<li class="chapter" data-level="74" data-path=""><a href="#devtools-2.2.2"><i class="fa fa-check"></i><b>74</b> devtools 2.2.2</a></li>
<li class="chapter" data-level="75" data-path=""><a href="#变量参数加上vars"><i class="fa fa-check"></i><b>75</b> 变量参数加上<code>vars</code></a></li>
<li class="chapter" data-level="76" data-path=""><a href="#查看包结构"><i class="fa fa-check"></i><b>76</b> 查看包结构</a></li>
<li class="chapter" data-level="77" data-path=""><a href="#查询-vignette"><i class="fa fa-check"></i><b>77</b> 查询 vignette</a></li>
<li class="chapter" data-level="78" data-path=""><a href="#vignette-和-suggest"><i class="fa fa-check"></i><b>78</b> vignette 和 suggest</a></li>
<li class="chapter" data-level="" data-path=""><a href="#附录"><i class="fa fa-check"></i>附录</a></li>
<li class="chapter" data-level="" data-path=""><a href="#参考文献"><i class="fa fa-check"></i>参考文献</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 开发包 Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">R 开发包 Cookbook</h1>
<p class="author"><em>李家翔</em></p>
<p class="date"><em>2020-06-08</em></p>
</div>
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
<ol style="list-style-type: decimal">
<li>使用 RMarkdown 的 <code>child</code> 参数，进行文档拼接。</li>
<li>这样拼接以后的笔记方便复习。</li>
<li>相关问题提交到
<a class="github-button" href="https://github.com/JiaxiangBU/tutoring2/issues" data-show-count="true" aria-label="Issue JiaxiangBU/tutoring on GitHub">Issue</a></li>
</ol>
<div id="完成状态" class="section level1">
<h1><span class="header-section-number">1</span> 完成状态</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">---------------------------------------</span><span class="st"> </span>add2md <span class="dv">1</span>.<span class="fl">1.0</span> <span class="op">----</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">51.8</span>s</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="dv">0</span> errors �� <span class="op">|</span><span class="st"> </span><span class="dv">0</span> warnings �� <span class="op">|</span><span class="st"> </span><span class="dv">0</span> notes ��</span>
<span id="cb1-5"><a href="#cb1-5"></a>Warning <span class="cf">in</span> <span class="kw">readChar</span>(path, <span class="dt">nchars =</span> <span class="kw">file.info</span>(path)<span class="op">$</span>size, ...) <span class="op">:</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="st">  </span>��non<span class="op">-</span>UTF<span class="dv">-8</span> MBCS���Ի�����ֻ�ܶ�ȡ�ֽ�</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a>R CMD check succeeded</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="dv">0</span> errors �� <span class="op">|</span><span class="st"> </span><span class="dv">0</span> warnings �� <span class="op">|</span><span class="st"> </span><span class="dv">0</span> notes ��</span></code></pre></div>
<p>体现了包可以上传了。</p>
</div>
<div id="函数缺少引用" class="section level1">
<h1><span class="header-section-number">2</span> 函数缺少引用</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span>checking R code <span class="cf">for</span> possible problems ... NOTE</span>
<span id="cb3-2"><a href="#cb3-2"></a>  get_output<span class="op">:</span><span class="st"> </span>no visible global <span class="cf">function</span> definition <span class="cf">for</span> <span class="st">&#39;mutate&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  get_url<span class="op">:</span><span class="st"> </span>no visible global <span class="cf">function</span> definition <span class="cf">for</span> <span class="st">&#39;map_chr&#39;</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  Undefined global functions or variables<span class="op">:</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="st">    </span>map_chr mutate</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="dv">0</span> errors �� <span class="op">|</span><span class="st"> </span><span class="dv">2</span> warnings x <span class="op">|</span><span class="st"> </span><span class="dv">2</span> notes x</span>
<span id="cb3-8"><a href="#cb3-8"></a>Warning <span class="cf">in</span> <span class="kw">readChar</span>(path, <span class="dt">nchars =</span> <span class="kw">file.info</span>(path)<span class="op">$</span>size, ...) <span class="op">:</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="st">  </span>��non<span class="op">-</span>UTF<span class="dv">-8</span> MBCS���Ի�����ֻ�ܶ�ȡ�ֽ�</span>
<span id="cb3-10"><a href="#cb3-10"></a>����<span class="op">:</span><span class="st"> </span>R CMD check found WARNINGs</span>
<span id="cb3-11"><a href="#cb3-11"></a>ִֹͣ��</span>
<span id="cb3-12"><a href="#cb3-12"></a></span>
<span id="cb3-13"><a href="#cb3-13"></a>Exited with status <span class="fl">1.</span></span></code></pre></div>
<p>加上 rer 的包名称。如 <code>mutate</code> 加上 <code>dplyr::</code></p>
</div>
<div id="ignore-额外文件夹" class="section level1">
<h1><span class="header-section-number">3</span> ignore 额外文件夹</h1>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span>checking top<span class="op">-</span>level files ... NOTE</span>
<span id="cb4-2"><a href="#cb4-2"></a>  Non<span class="op">-</span>standard file<span class="op">/</span>directory found at top level<span class="op">:</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="st">    &#39;depreciated&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">use_build_ignore</span>(<span class="st">&quot;depreciated&quot;</span>)</span></code></pre></div>
</div>
<div id="使用-unicode" class="section level1">
<h1><span class="header-section-number">4</span> 使用 Unicode</h1>
<p>参考 <a href="https://stackoverflow.com/a/22224027/8625228" class="uri">https://stackoverflow.com/a/22224027/8625228</a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">---------------------------------------</span><span class="st"> </span>add2md <span class="dv">1</span>.<span class="fl">1.0</span> <span class="op">----</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">56.7</span>s</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="op">&gt;</span><span class="st"> </span>checking R files <span class="cf">for</span> non<span class="op">-</span>ASCII characters ... WARNING</span>
<span id="cb6-5"><a href="#cb6-5"></a>  Found the following file with non<span class="op">-</span>ASCII characters<span class="op">:</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="st">    </span>paste_kindle.R</span>
<span id="cb6-7"><a href="#cb6-7"></a>  Portable packages must use only ASCII characters <span class="cf">in</span> their R code,</span>
<span id="cb6-8"><a href="#cb6-8"></a>  except perhaps <span class="cf">in</span> comments.</span>
<span id="cb6-9"><a href="#cb6-9"></a>  Use \uxxxx escapes <span class="cf">for</span> other characters.</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>clipr<span class="op">::</span><span class="kw">read_clip</span>() <span class="op">%&gt;%</span><span class="st"> </span>stringi<span class="op">::</span><span class="kw">stri_escape_unicode</span>() <span class="op">%&gt;%</span><span class="st"> </span>clipr<span class="op">::</span><span class="kw">write_clip</span>()</span></code></pre></div>
</div>
<div id="vignette-报错" class="section level1">
<h1><span class="header-section-number">5</span> vignette 报错</h1>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>E  creating <span class="kw">vignettes</span> (<span class="fl">13.4</span>s)</span>
<span id="cb8-2"><a href="#cb8-2"></a>   <span class="op">---</span><span class="st"> </span>re<span class="op">-</span>building <span class="st">&#39;introduction.Rmd&#39;</span> using rmarkdown</span>
<span id="cb8-3"><a href="#cb8-3"></a>   Quitting from lines <span class="dv">228-229</span> (introduction.Rmd) </span>
<span id="cb8-4"><a href="#cb8-4"></a>   Error<span class="op">:</span><span class="st"> </span>processing vignette <span class="st">&#39;introduction.Rmd&#39;</span> failed with diagnostics<span class="op">:</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">   </span>û��<span class="st">&quot;relative_path&quot;</span>�������</span>
<span id="cb8-6"><a href="#cb8-6"></a>   <span class="op">---</span><span class="st"> </span>failed re<span class="op">-</span>building <span class="st">&#39;introduction.Rmd&#39;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>   </span>
<span id="cb8-8"><a href="#cb8-8"></a>   <span class="op">---</span><span class="st"> </span>re<span class="op">-</span>building <span class="st">&#39;url.Rmd&#39;</span> using rmarkdown</span>
<span id="cb8-9"><a href="#cb8-9"></a>   <span class="op">---</span><span class="st"> </span>finished re<span class="op">-</span>building <span class="st">&#39;url.Rmd&#39;</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>   </span>
<span id="cb8-11"><a href="#cb8-11"></a>   SUMMARY<span class="op">:</span><span class="st"> </span>processing the following file failed<span class="op">:</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="st">     &#39;introduction.Rmd&#39;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>   </span>
<span id="cb8-14"><a href="#cb8-14"></a>   ����<span class="op">:</span><span class="st"> </span>Vignette re<span class="op">-</span>building failed.</span>
<span id="cb8-15"><a href="#cb8-15"></a>   ִֹͣ��</span>
<span id="cb8-16"><a href="#cb8-16"></a>Error <span class="cf">in</span> (<span class="cf">function</span> (<span class="dt">command =</span> <span class="ot">NULL</span>, <span class="dt">args =</span> <span class="kw">character</span>(), <span class="dt">error_on_status =</span> <span class="ot">TRUE</span>,  <span class="op">:</span><span class="st"> </span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="st">  </span>System command error</span>
<span id="cb8-18"><a href="#cb8-18"></a>Calls<span class="op">:</span><span class="st"> </span><span class="er">&lt;</span>Anonymous<span class="op">&gt;</span><span class="st"> </span>... eval -&gt;<span class="st"> </span>with_envvar -&gt;<span class="st"> </span>force -&gt;<span class="st"> </span>do.call -&gt;<span class="st"> </span><span class="er">&lt;</span>Anonymous<span class="op">&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>ִֹͣ��</span>
<span id="cb8-20"><a href="#cb8-20"></a></span>
<span id="cb8-21"><a href="#cb8-21"></a>Exited with status <span class="fl">1.</span></span></code></pre></div>
<p>删除 depreciated 的函数</p>
</div>
<div id="use_package" class="section level1">
<h1><span class="header-section-number">6</span> use_package</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span>checking package dependencies ... ERROR</span>
<span id="cb9-2"><a href="#cb9-2"></a>  Namespace dependencies not required<span class="op">:</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">    &#39;clipr&#39;</span>, <span class="st">&#39;glue&#39;</span>, <span class="st">&#39;rstudioapi&#39;</span>, <span class="st">&#39;rvest&#39;</span>, <span class="st">&#39;usethis&#39;</span>, <span class="st">&#39;xml2&#39;</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  </span>
<span id="cb9-5"><a href="#cb9-5"></a>  See section <span class="st">&#39;The DESCRIPTION file&#39;</span> <span class="cf">in</span> the <span class="st">&#39;Writing R Extensions&#39;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  manual.</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="dv">1</span> error x <span class="op">|</span><span class="st"> </span><span class="dv">0</span> warnings <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span><span class="st"> </span><span class="er">|</span><span class="st"> </span><span class="dv">0</span> notes <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span></span></code></pre></div>
<p>复制 <code>'clipr', 'glue', 'rstudioapi', 'rvest', 'usethis', 'xml2'</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">c</span>(<span class="st">&#39;clipr&#39;</span>, <span class="st">&#39;glue&#39;</span>, <span class="st">&#39;rstudioapi&#39;</span>, <span class="st">&#39;rvest&#39;</span>, <span class="st">&#39;usethis&#39;</span>, <span class="st">&#39;xml2&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">    </span>purrr<span class="op">::</span><span class="kw">walk</span>(usethis<span class="op">::</span>use_package)</span></code></pre></div>
<p>现在可以用 <code>add2pkg::map_use_package</code></p>
</div>
<div id="去除-library" class="section level1">
<h1><span class="header-section-number">7</span> 去除 library</h1>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">&gt;</span><span class="st"> </span>checking dependencies <span class="cf">in</span> R code ... WARNING</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="st">&#39;::&#39;</span> or <span class="st">&#39;:::&#39;</span> imports not declared from<span class="op">:</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">    &#39;here&#39;</span> <span class="st">&#39;readr&#39;</span> <span class="st">&#39;stringr&#39;</span> <span class="st">&#39;yaml&#39;</span></span></code></pre></div>
<p>直接在 utils 加入
复制 <code>'here' 'readr' 'stringr' 'yaml'</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="st">&quot;&#39;here&#39; &#39;readr&#39; &#39;stringr&#39; &#39;yaml&#39;&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">    </span><span class="kw">str_split</span>(<span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">    </span>.[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">    </span><span class="kw">str_remove_all</span>(<span class="st">&quot;&#39;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">    </span><span class="kw">paste</span>(<span class="st">&quot;#&#39; @import&quot;</span>, .) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">    </span><span class="kw">str_flatten</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="st">    </span>clipr<span class="op">::</span><span class="kw">write_clip</span>()</span></code></pre></div>
<p>然后增加</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="st">&quot;&#39;here&#39; &#39;readr&#39; &#39;stringr&#39; &#39;yaml&#39;&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="st">    </span><span class="kw">str_split</span>(<span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="st">    </span>.[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="st">    </span><span class="kw">str_remove_all</span>(<span class="st">&quot;&#39;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="st">    </span>purrr<span class="op">::</span><span class="kw">walk</span>(usethis<span class="op">::</span>use_package)</span></code></pre></div>
</div>
<div id="函数缺少描述" class="section level1">
<h1><span class="header-section-number">8</span> 函数缺少描述</h1>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="op">&gt;</span><span class="st"> </span>checking <span class="cf">for</span> missing documentation entries ... WARNING</span>
<span id="cb14-3"><a href="#cb14-3"></a>  Undocumented code objects<span class="op">:</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">    &#39;m1_v2&#39;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  All user<span class="op">-</span>level objects <span class="cf">in</span> a package should have documentation entries.</span>
<span id="cb14-6"><a href="#cb14-6"></a>  See chapter <span class="st">&#39;Writing R documentation files&#39;</span> <span class="cf">in</span> the <span class="st">&#39;Writing R</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="st">  Extensions&#39;</span> manual.</span></code></pre></div>
<p>add</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">#&#39; Build a url in markdown</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&#39;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">#&#39; This function helps users to paste url in markdown</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">#&#39;</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">#&#39; @param size the figure size, by default, 100 x 100</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">#&#39; @return Character.</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&#39; @author Jiaxiang Li</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#&#39;</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">#&#39; @import rstudioapi</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&#39; @importFrom stringr str_split str_match str_detect</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&#39; @importFrom glue glue</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&#39; @importFrom rebus %R% or DOT one_or_more LOWER optional capture </span><span class="re">END</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&#39; @export</span></span></code></pre></div>
</div>
<div id="函数参数缺少描述" class="section level1">
<h1><span class="header-section-number">9</span> 函数参数缺少描述</h1>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="op">&gt;</span><span class="st"> </span>checking Rd \usage sections ... WARNING</span>
<span id="cb16-2"><a href="#cb16-2"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;build_iframe&#39;</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="st">&#39;input&#39;</span> <span class="st">&#39;is_nbviewer&#39;</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  Documented arguments not <span class="cf">in</span> \usage <span class="cf">in</span> documentation object <span class="st">&#39;build_iframe&#39;</span><span class="op">:</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="st">    &#39;url&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">#&#39; @param input character. URL.</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co">#&#39; @param is_nbviewer logical. Whether the url is Jupyter notebook.</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;button&#39;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="st">&#39;...&#39;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  </span>
<span id="cb18-4"><a href="#cb18-4"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;center&#39;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="st">&#39;input&#39;</span> <span class="st">&#39;size&#39;</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>  </span>
<span id="cb18-7"><a href="#cb18-7"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;change_to_upper&#39;</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>    <span class="st">&#39;input&#39;</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  </span>
<span id="cb18-10"><a href="#cb18-10"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;checkbox&#39;</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>    <span class="st">&#39;input&#39;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>  </span>
<span id="cb18-13"><a href="#cb18-13"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;extract_firstline&#39;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    <span class="st">&#39;url&#39;</span> <span class="st">&#39;content_path&#39;</span> <span class="st">&#39;pattern&#39;</span> <span class="st">&#39;para_length&#39;</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>  </span>
<span id="cb18-16"><a href="#cb18-16"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;extract_highlight&#39;</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>    <span class="st">&#39;url&#39;</span> <span class="st">&#39;pattern&#39;</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>  </span>
<span id="cb18-19"><a href="#cb18-19"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;get_input&#39;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a>    <span class="st">&#39;input&#39;</span> <span class="st">&#39;clip&#39;</span> <span class="st">&#39;collapse&#39;</span></span>
<span id="cb18-21"><a href="#cb18-21"></a>  </span>
<span id="cb18-22"><a href="#cb18-22"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;get_quote&#39;</span></span>
<span id="cb18-23"><a href="#cb18-23"></a>    <span class="st">&#39;input&#39;</span></span>
<span id="cb18-24"><a href="#cb18-24"></a>  </span>
<span id="cb18-25"><a href="#cb18-25"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;get_url&#39;</span></span>
<span id="cb18-26"><a href="#cb18-26"></a>    <span class="st">&#39;input&#39;</span> <span class="st">&#39;name&#39;</span></span>
<span id="cb18-27"><a href="#cb18-27"></a>  </span>
<span id="cb18-28"><a href="#cb18-28"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;get_url_title&#39;</span></span>
<span id="cb18-29"><a href="#cb18-29"></a>    <span class="st">&#39;url&#39;</span></span>
<span id="cb18-30"><a href="#cb18-30"></a>  </span>
<span id="cb18-31"><a href="#cb18-31"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;get_word_style&#39;</span></span>
<span id="cb18-32"><a href="#cb18-32"></a>    <span class="st">&#39;style&#39;</span></span>
<span id="cb18-33"><a href="#cb18-33"></a>  </span>
<span id="cb18-34"><a href="#cb18-34"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;kbd&#39;</span></span>
<span id="cb18-35"><a href="#cb18-35"></a>    <span class="st">&#39;...&#39;</span></span>
<span id="cb18-36"><a href="#cb18-36"></a>  </span>
<span id="cb18-37"><a href="#cb18-37"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;list_in_order&#39;</span></span>
<span id="cb18-38"><a href="#cb18-38"></a>    <span class="st">&#39;input&#39;</span></span>
<span id="cb18-39"><a href="#cb18-39"></a>  </span>
<span id="cb18-40"><a href="#cb18-40"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;mark&#39;</span></span>
<span id="cb18-41"><a href="#cb18-41"></a>    <span class="st">&#39;...&#39;</span></span>
<span id="cb18-42"><a href="#cb18-42"></a>  </span>
<span id="cb18-43"><a href="#cb18-43"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;naming_dir&#39;</span></span>
<span id="cb18-44"><a href="#cb18-44"></a>    <span class="st">&#39;input&#39;</span> <span class="st">&#39;sep&#39;</span></span>
<span id="cb18-45"><a href="#cb18-45"></a>  </span>
<span id="cb18-46"><a href="#cb18-46"></a>  Undocumented arguments <span class="cf">in</span> documentation object <span class="st">&#39;transfer2df&#39;</span></span>
<span id="cb18-47"><a href="#cb18-47"></a>    <span class="st">&#39;raw_text&#39;</span></span>
<span id="cb18-48"><a href="#cb18-48"></a>  Documented arguments not <span class="cf">in</span> \usage <span class="cf">in</span> documentation object <span class="st">&#39;transfer2df&#39;</span><span class="op">:</span></span>
<span id="cb18-49"><a href="#cb18-49"></a><span class="st">    &#39;size&#39;</span></span>
<span id="cb18-50"><a href="#cb18-50"></a>  </span>
<span id="cb18-51"><a href="#cb18-51"></a>  Functions with \usage entries need to have the appropriate \alias</span>
<span id="cb18-52"><a href="#cb18-52"></a>  entries, and all their arguments documented.</span>
<span id="cb18-53"><a href="#cb18-53"></a>  The \usage entries must correspond to syntactically valid R code.</span>
<span id="cb18-54"><a href="#cb18-54"></a>  See chapter <span class="st">&#39;Writing R documentation files&#39;</span> <span class="cf">in</span> the <span class="st">&#39;Writing R</span></span>
<span id="cb18-55"><a href="#cb18-55"></a><span class="st">  Extensions&#39;</span> manual.</span></code></pre></div>
<p>一个个添加好</p>
<p>没有 <code>@export</code> 函数，如果增加了多余的参数，也会报错。</p>
</div>
<div id="packrat-删除" class="section level1">
<h1><span class="header-section-number">10</span> packrat 删除</h1>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="op">&gt;</span><span class="st"> </span>checking <span class="cf">if</span> this is a source package ... NOTE</span>
<span id="cb19-3"><a href="#cb19-3"></a>  Subdirectory <span class="st">&#39;packrat/lib/x86_64-apple-darwin15.6.0/3.5.1/packrat&#39;</span> seems to contain an installed version of the package.</span></code></pre></div>
<p>直接删除。</p>
</div>
<div id="去除-global-variables-的问题" class="section level1">
<h1><span class="header-section-number">11</span> 去除 global variables 的问题</h1>
<p>一般 check 时会出现这样的问题，这是使用 <code>.</code> 写 pipline 产生的。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>Undefined global functions or variables<span class="op">:</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="st">    </span>. cutoff fpr key ks tpr value</span></code></pre></div>
<p>一般有两种方法，</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>var_list &lt;-<span class="st"> </span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="st">&quot;. cutoff fpr key ks tpr value&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="st">  </span><span class="kw">strsplit</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">s&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="st">  </span>.[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="st">  </span><span class="kw">paste0</span>(<span class="st">&quot;</span><span class="ch">\&quot;</span><span class="st">&quot;</span>, ., <span class="st">&quot;</span><span class="ch">\&quot;</span><span class="st">&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="st">  </span><span class="kw">str_flatten</span>(<span class="st">&quot;, &quot;</span>)</span>
<span id="cb21-7"><a href="#cb21-7"></a>glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&quot;globalVariables(c({var_list}))&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="st">  </span>clipr<span class="op">::</span><span class="kw">write_clip</span>()</span></code></pre></div>
<p>注意这里别忘了 <code>c()</code>，否则报错。
<code>number</code> 是一个包。</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">---------------------------------------</span><span class="st"> </span>add2gh <span class="dv">0</span>.<span class="fl">1.0</span> <span class="op">----</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">42.7</span>s</span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="op">&gt;</span><span class="st"> </span>checking R code <span class="cf">for</span> possible problems ... NOTE</span>
<span id="cb22-5"><a href="#cb22-5"></a>  collect_comments<span class="op">:</span><span class="st"> </span>no visible binding <span class="cf">for</span> global variable <span class="st">&#39;number&#39;</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>  Undefined global functions or variables<span class="op">:</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="st">    </span>number</span></code></pre></div>
<p>或者，</p>
<blockquote>
<p>Quoted arguments in tidyverse functions can trigger an <strong>R CMD check NOTE</strong> about undefined global variables. To avoid this: 1.Import <code>rlang::.data</code> to your package, perhaps with the roxygen2 tag <code>@importFrom rlang .data</code> 2.Use the <code>.data$</code> pronoun in front of variable names in tidyverse<span class="citation">(Developed 2019)</span></p>
</blockquote>

<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figure/20200322125624.png&quot;</span>)</span>
<span id="cb23-2"><a href="#cb23-2"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figure/20200322125734.png&quot;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:global-var-plot"></span>
<img src="figure/20200322125624.png" alt="防止建立包时，检测出现 notes，可以让.data$var尽量在aes()和vars里面(Dunnington 2020)" width="50%" /><img src="figure/20200322125734.png" alt="防止建立包时，检测出现 notes，可以让.data$var尽量在aes()和vars里面(Dunnington 2020)" width="50%" />
<p class="caption">
Figure 11.1: 防止建立包时，检测出现 notes，可以让<code>.data$var</code>尽量在<code>aes()</code>和<code>vars</code>里面<span class="citation">(Dunnington 2020)</span>
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">#&#39; @importFrom rlang .data </span></span>
<span id="cb24-2"><a href="#cb24-2"></a>mutate_y &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb24-3"><a href="#cb24-3"></a>    dplyr<span class="op">::</span><span class="kw">mutate</span>(df, <span class="dt">y =</span> .data<span class="op">$</span>a <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb24-4"><a href="#cb24-4"></a>}</span></code></pre></div>
</div>
<div id="给函数加上包名" class="section level1">
<h1><span class="header-section-number">12</span> 给函数加上包名</h1>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>  Undefined global functions or variables<span class="op">:</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="st">    </span>. PC1 abs_err d global_mean lift local_mean m mae_d na.omit name</span>
<span id="cb25-3"><a href="#cb25-3"></a>    obs_pctg pos_pctg predict str_remove_all str_sub sysname</span>
<span id="cb25-4"><a href="#cb25-4"></a>    write_excel_csv y yhat yhat_bin yr</span>
<span id="cb25-5"><a href="#cb25-5"></a>  Consider adding</span>
<span id="cb25-6"><a href="#cb25-6"></a>    <span class="kw">importFrom</span>(<span class="st">&quot;stats&quot;</span>, <span class="st">&quot;na.omit&quot;</span>, <span class="st">&quot;predict&quot;</span>)</span>
<span id="cb25-7"><a href="#cb25-7"></a>  to your NAMESPACE file.</span></code></pre></div>
<p>类似于这种情况中，显然<code>write_excel_csv</code>是一个未加上报名的函数。
加完以后记得加上 <code>@import</code></p>
</div>
<div id="todos-进-commit" class="section level1">
<h1><span class="header-section-number">13</span> todos 进 commit</h1>
<p>放到 commit 最后都可以整理成 NEWS 的！</p>
</div>
<div id="news" class="section level1">
<h1><span class="header-section-number">14</span> 更新 NEWS.md</h1>
<p>以包 add2md 为例。</p>
<pre class="r}"><code>add2git:::commit2news(repo_path = ,min = ,max = )</code></pre>
<ol style="list-style-type: decimal">
<li>updated the function of <code>checkbox</code> with the feature checked -&gt; unchecked.</li>
<li>updated the function <code>checkbox</code> with the feature <code>checked</code>.</li>
<li>reformatted code.</li>
<li>depreciated the function <code>append_archive</code>.</li>
<li>fixed bugs and typos and encoding problems.</li>
<li>translated non-ASCII characters into unicode, add <code>@params</code> args, delete packrat, ignore docs-building, add global variables.</li>
<li>updated imported packages, and remove depreciated functions in vignettes document.</li>
<li>added the function <code>add_wechat_portfolio</code>.</li>
<li>updated the function <code>diagrammer_shortcut</code>.</li>
<li>made the function <code>get_input</code> exported.</li>
<li>made functions output visible.</li>
<li>added arg <code>para_length</code> for the function <code>extract_firstline</code>.</li>
<li>updated license.</li>
</ol>
<p>把所有 commit 拿出来然后进行整合。
这就是为什么要认真写 commit。</p>
</div>
<div id="cran-comments" class="section level1">
<h1><span class="header-section-number">15</span> CRAN Comments</h1>
<ol style="list-style-type: decimal">
<li><code>usethis::use_cran_comments()</code></li>
<li><code>usethis::use_build_ignore("cran-comments.md")</code></li>
</ol>
<p>创建如下</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">## Test environments</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="op">*</span><span class="st"> </span>local OS X install, R <span class="dv">3</span>.<span class="fl">6.0</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="op">*</span><span class="st"> </span>ubuntu <span class="fl">14.04</span> (on travis<span class="op">-</span>ci), R <span class="dv">3</span>.<span class="fl">6.0</span></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="op">*</span><span class="st"> </span>win<span class="op">-</span><span class="kw">builder</span> (devel and release)</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co">## R CMD check results</span></span>
<span id="cb27-7"><a href="#cb27-7"></a></span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="dv">0</span> errors <span class="op">|</span><span class="st"> </span><span class="dv">0</span> warnings <span class="op">|</span><span class="st"> </span><span class="dv">1</span> note</span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="op">*</span><span class="st"> </span>This is a new release.</span></code></pre></div>
</div>
<div id="ignore-readme.rmd" class="section level1">
<h1><span class="header-section-number">16</span> Ignore README.Rmd</h1>
<p>参考 <a href="https://stackoverflow.com/a/48956446/8625228" class="uri">https://stackoverflow.com/a/48956446/8625228</a></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">&gt;</span><span class="st"> </span>checking top<span class="op">-</span>level files ... NOTE</span>
<span id="cb28-2"><a href="#cb28-2"></a>  Non<span class="op">-</span>standard file<span class="op">/</span>directory found at top level<span class="op">:</span></span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="st">    &#39;README.Rmd&#39;</span></span></code></pre></div>
<p><code>usethis::use_build_ignore("README.Rmd")</code></p>
</div>
<div id="update-desc" class="section level1">
<h1><span class="header-section-number">17</span> Update DESC</h1>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="op">&gt;</span><span class="st"> </span>checking DESCRIPTION meta<span class="op">-</span>information ... NOTE</span>
<span id="cb29-2"><a href="#cb29-2"></a>  Malformed Description field<span class="op">:</span><span class="st"> </span>should contain one or more complete sentences.</span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>Description<span class="op">:</span><span class="st"> </span>Some helper functions <span class="cf">for</span> R package development,</span>
<span id="cb30-2"><a href="#cb30-2"></a>    including create disclaimer, author information and so on.</span></code></pre></div>
</div>
<div id="保证-readme.rmd-链接都是有效的" class="section level1">
<h1><span class="header-section-number">18</span> 保证 README.Rmd 链接都是有效的</h1>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>New submission</span>
<span id="cb31-2"><a href="#cb31-2"></a> </span>
<span id="cb31-3"><a href="#cb31-3"></a>  Found the <span class="kw">following</span> (possibly) invalid file URIs<span class="op">:</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="st">    </span>URI<span class="op">:</span><span class="st"> </span>.github<span class="op">/</span>CODE_OF_CONDUCT.md</span>
<span id="cb31-5"><a href="#cb31-5"></a>      From<span class="op">:</span><span class="st"> </span>README.md</span>
<span id="cb31-6"><a href="#cb31-6"></a>    URI<span class="op">:</span><span class="st"> </span>LICENSE.md</span>
<span id="cb31-7"><a href="#cb31-7"></a>      From<span class="op">:</span><span class="st"> </span>README.md</span></code></pre></div>
</div>
<div id="add-examples-tests-and-vignettes" class="section level1">
<h1><span class="header-section-number">19</span> Add examples, tests, and vignettes</h1>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>Flavor<span class="op">:</span><span class="st"> </span>r<span class="op">-</span>devel<span class="op">-</span>linux<span class="op">-</span>x86_<span class="dv">64</span><span class="op">-</span>debian<span class="op">-</span>gcc, r<span class="op">-</span>devel<span class="op">-</span>windows<span class="op">-</span>ix86<span class="op">+</span>x86_<span class="dv">64</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>Check<span class="op">:</span><span class="st"> </span><span class="cf">for</span> code which exercises the package, Result<span class="op">:</span><span class="st"> </span>WARNING</span>
<span id="cb32-3"><a href="#cb32-3"></a>  No examples, no tests, no vignettes</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>增加<code>usethis::use_spell_check()</code>，增加<code>test</code></li>
<li>在 R 加入 <code>@examples</code>，新建 vignette，加入</li>
<li>加入 <code>README.Rmd</code>，用 child</li>
</ol>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="op">&gt;</span><span class="st"> </span>usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;add_me&quot;</span>)</span>
<span id="cb33-2"><a href="#cb33-2"></a>✔ Setting active project to <span class="st">&#39;D:/work/add2pkg&#39;</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>✔ Adding <span class="st">&#39;testthat&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb33-4"><a href="#cb33-4"></a>✔ Creating <span class="st">&#39;tests/testthat/&#39;</span></span>
<span id="cb33-5"><a href="#cb33-5"></a>✔ Writing <span class="st">&#39;tests/testthat.R&#39;</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>● Call <span class="st">`</span><span class="dt">use_test()</span><span class="st">`</span> to initialize a basic test file and open it <span class="cf">for</span> editing.</span>
<span id="cb33-7"><a href="#cb33-7"></a>✔ Increasing <span class="st">&#39;testthat&#39;</span> version to <span class="st">&#39;&gt;= 2.1.0&#39;</span> <span class="cf">in</span> DESCRIPTION</span>
<span id="cb33-8"><a href="#cb33-8"></a>✔ Writing <span class="st">&#39;tests/testthat/test-add_me.R&#39;</span></span>
<span id="cb33-9"><a href="#cb33-9"></a>● Modify <span class="st">&#39;tests/testthat/test-add_me.R&#39;</span></span></code></pre></div>
<p>加上 test</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="kw">test_that</span>(<span class="st">&quot;Plain Text&quot;</span>, {</span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="kw">expect_equal</span>(<span class="kw">add_me</span>(), <span class="st">&#39;Authors@R:</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="st">    person(given = &quot;Jiaxiang&quot;,</span></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="st">           family = &quot;Li&quot;,</span></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="st">           role = c(&quot;aut&quot;, &quot;cre&quot;),</span></span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="st">           email = &quot;alex.lijiaxiang@foxmail.com&quot;,</span></span>
<span id="cb34-7"><a href="#cb34-7"></a><span class="st">           comment = c(ORCID = &quot;https://orcid.org/0000-0003-3196-6492&quot;))&#39;</span>)</span>
<span id="cb34-8"><a href="#cb34-8"></a>})</span></code></pre></div>
<p><code>expect_that(add_bibtex("book"), prints_text())</code> 很好。</p>
<p>加上 vignette</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">use_vignette</span>(<span class="st">&quot;intro&quot;</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a>✔ Adding <span class="st">&#39;knitr&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb35-3"><a href="#cb35-3"></a>✔ Setting VignetteBuilder field <span class="cf">in</span> DESCRIPTION to <span class="st">&#39;knitr&#39;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>✔ Adding <span class="st">&#39;inst/doc&#39;</span> to <span class="st">&#39;.gitignore&#39;</span></span>
<span id="cb35-5"><a href="#cb35-5"></a>✔ Creating <span class="st">&#39;vignettes/&#39;</span></span>
<span id="cb35-6"><a href="#cb35-6"></a>✔ Adding <span class="st">&#39;*.html&#39;</span>, <span class="st">&#39;*.R&#39;</span> to <span class="st">&#39;vignettes/.gitignore&#39;</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>✔ Adding <span class="st">&#39;rmarkdown&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb35-8"><a href="#cb35-8"></a>✔ Writing <span class="st">&#39;vignettes/intro.Rmd&#39;</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>● Modify <span class="st">&#39;vignettes/intro.Rmd&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">add_me</span>()</span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">add_disclaimer</span>()</span></code></pre></div>
</div>
<div id="release-函数的流程" class="section level1">
<h1><span class="header-section-number">20</span> release 函数的流程</h1>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="op">&gt;</span><span class="st"> </span>devtools<span class="op">::</span><span class="kw">release</span>()</span>
<span id="cb38-2"><a href="#cb38-2"></a>Warning<span class="op">:</span><span class="st"> </span>DR_DEVTOOLS FOUND PROBLEMS</span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="op">*</span><span class="st"> </span>R is out of <span class="kw">date</span> (<span class="dv">3</span>.<span class="fl">6.0</span> vs <span class="dv">3</span>.<span class="fl">6.2</span>)</span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="op">*</span><span class="st"> </span>Devtools or dependencies out of date<span class="op">:</span><span class="st"> </span>devtools, callr, cli, covr, digest, DT, httr,</span>
<span id="cb38-5"><a href="#cb38-5"></a>  pkgbuild, rlang, roxygen2, testthat, curl, whisker, R6, Rcpp, backports, mime,</span>
<span id="cb38-6"><a href="#cb38-6"></a>  openssl, sys, processx, fansi, rex, htmlwidgets, ggplot2, scales, BH, plyr, pillar,</span>
<span id="cb38-7"><a href="#cb38-7"></a>  pkgconfig, vctrs, stringi, prettyunits, xml2</span>
<span id="cb38-8"><a href="#cb38-8"></a><span class="op">*</span><span class="st"> </span>RStudio is out of <span class="kw">date</span> (<span class="dv">1</span>.<span class="fl">2.5001</span> vs <span class="dv">1</span>.<span class="dv">2</span>.<span class="fl">5033.1</span>)</span>
<span id="cb38-9"><a href="#cb38-9"></a>Proceed anyway?</span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>I forget</span>
<span id="cb38-11"><a href="#cb38-11"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>Not yet</span>
<span id="cb38-12"><a href="#cb38-12"></a><span class="dv">3</span><span class="op">:</span><span class="st"> </span>Yup</span>
<span id="cb38-13"><a href="#cb38-13"></a></span>
<span id="cb38-14"><a href="#cb38-14"></a>Selection<span class="op">:</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>Have you checked <span class="cf">for</span> spelling <span class="kw">errors</span> (with <span class="st">`</span><span class="dt">spell_check()</span><span class="st">`</span>)?</span>
<span id="cb38-16"><a href="#cb38-16"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>I forget</span>
<span id="cb38-17"><a href="#cb38-17"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>For sure</span>
<span id="cb38-18"><a href="#cb38-18"></a><span class="dv">3</span><span class="op">:</span><span class="st"> </span>No way</span>
<span id="cb38-19"><a href="#cb38-19"></a></span>
<span id="cb38-20"><a href="#cb38-20"></a>Selection<span class="op">:</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb38-21"><a href="#cb38-21"></a>Have you run <span class="st">`</span><span class="dt">R CMD check</span><span class="st">`</span> locally?</span>
<span id="cb38-22"><a href="#cb38-22"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>Yup</span>
<span id="cb38-23"><a href="#cb38-23"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>Not yet</span>
<span id="cb38-24"><a href="#cb38-24"></a><span class="dv">3</span><span class="op">:</span><span class="st"> </span>No way</span>
<span id="cb38-25"><a href="#cb38-25"></a></span>
<span id="cb38-26"><a href="#cb38-26"></a>Selection<span class="op">:</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb38-27"><a href="#cb38-27"></a>── Running additional devtools checks <span class="cf">for</span> add2pkg ──────────────────────────────</span>
<span id="cb38-28"><a href="#cb38-28"></a>Checking version number has three components... OK</span>
<span id="cb38-29"><a href="#cb38-29"></a>Checking dependencies don<span class="st">&#39;t rely on dev versions... OK</span></span>
<span id="cb38-30"><a href="#cb38-30"></a><span class="st">Checking vignette titles are not placeholders... OK</span></span>
<span id="cb38-31"><a href="#cb38-31"></a><span class="st">Checking NEWS.md is not ignored... OK</span></span>
<span id="cb38-32"><a href="#cb38-32"></a><span class="st">Checking NEWS.Rd does not exist... OK</span></span>
<span id="cb38-33"><a href="#cb38-33"></a><span class="st">Checking DESCRIPTION doesn&#39;</span>t have Remotes field... OK</span>
<span id="cb38-34"><a href="#cb38-34"></a>────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb38-35"><a href="#cb38-35"></a>Were devtool<span class="st">&#39;s checks successful?</span></span>
<span id="cb38-36"><a href="#cb38-36"></a><span class="st">1: Not yet</span></span>
<span id="cb38-37"><a href="#cb38-37"></a><span class="st">2: Definitely</span></span>
<span id="cb38-38"><a href="#cb38-38"></a><span class="st">3: No</span></span>
<span id="cb38-39"><a href="#cb38-39"></a></span>
<span id="cb38-40"><a href="#cb38-40"></a><span class="st">Selection: 2</span></span>
<span id="cb38-41"><a href="#cb38-41"></a><span class="st">Have you checked on R-hub (with `check_rhub()`)?</span></span>
<span id="cb38-42"><a href="#cb38-42"></a><span class="st">1: No way</span></span>
<span id="cb38-43"><a href="#cb38-43"></a><span class="st">2: I forget</span></span>
<span id="cb38-44"><a href="#cb38-44"></a><span class="st">3: Definitely</span></span>
<span id="cb38-45"><a href="#cb38-45"></a></span>
<span id="cb38-46"><a href="#cb38-46"></a><span class="st">Selection: 3</span></span>
<span id="cb38-47"><a href="#cb38-47"></a><span class="st">Have you checked on win-builder (with `check_win_devel()`)?</span></span>
<span id="cb38-48"><a href="#cb38-48"></a><span class="st">1: No way</span></span>
<span id="cb38-49"><a href="#cb38-49"></a><span class="st">2: Definitely</span></span>
<span id="cb38-50"><a href="#cb38-50"></a><span class="st">3: No</span></span>
<span id="cb38-51"><a href="#cb38-51"></a></span>
<span id="cb38-52"><a href="#cb38-52"></a><span class="st">Selection: 2</span></span>
<span id="cb38-53"><a href="#cb38-53"></a><span class="st">Have you updated `NEWS.md` file?</span></span>
<span id="cb38-54"><a href="#cb38-54"></a><span class="st">1: Yeah</span></span>
<span id="cb38-55"><a href="#cb38-55"></a><span class="st">2: Nope</span></span>
<span id="cb38-56"><a href="#cb38-56"></a><span class="st">3: Uhhhh... Maybe?</span></span>
<span id="cb38-57"><a href="#cb38-57"></a></span>
<span id="cb38-58"><a href="#cb38-58"></a><span class="st">Selection: 1</span></span>
<span id="cb38-59"><a href="#cb38-59"></a><span class="st">Have you updated `DESCRIPTION`?</span></span>
<span id="cb38-60"><a href="#cb38-60"></a><span class="st">1: No way</span></span>
<span id="cb38-61"><a href="#cb38-61"></a><span class="st">2: For sure</span></span>
<span id="cb38-62"><a href="#cb38-62"></a><span class="st">3: Nope</span></span>
<span id="cb38-63"><a href="#cb38-63"></a></span>
<span id="cb38-64"><a href="#cb38-64"></a><span class="st">Selection: 2</span></span>
<span id="cb38-65"><a href="#cb38-65"></a><span class="st">Have you updated `cran-comments.md?`</span></span>
<span id="cb38-66"><a href="#cb38-66"></a><span class="st">1: Of course</span></span>
<span id="cb38-67"><a href="#cb38-67"></a><span class="st">2: Uhhhh... Maybe?</span></span>
<span id="cb38-68"><a href="#cb38-68"></a><span class="st">3: Not yet</span></span>
<span id="cb38-69"><a href="#cb38-69"></a></span>
<span id="cb38-70"><a href="#cb38-70"></a><span class="st">Selection: 1</span></span>
<span id="cb38-71"><a href="#cb38-71"></a><span class="st">── Running Git checks for add2pkg ──────────────────────────────────────────────</span></span>
<span id="cb38-72"><a href="#cb38-72"></a><span class="st">Checking uncommitted files... OK</span></span>
<span id="cb38-73"><a href="#cb38-73"></a><span class="st">Checking synchronisation with remote branch... OK</span></span>
<span id="cb38-74"><a href="#cb38-74"></a><span class="st">────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb38-75"><a href="#cb38-75"></a><span class="st">Were Git checks successful?</span></span>
<span id="cb38-76"><a href="#cb38-76"></a><span class="st">1: Not yet</span></span>
<span id="cb38-77"><a href="#cb38-77"></a><span class="st">2: Yup</span></span>
<span id="cb38-78"><a href="#cb38-78"></a><span class="st">3: Uhhhh... Maybe?</span></span>
<span id="cb38-79"><a href="#cb38-79"></a></span>
<span id="cb38-80"><a href="#cb38-80"></a><span class="st">Selection: 2</span></span>
<span id="cb38-81"><a href="#cb38-81"></a><span class="st">Is your email address alex.lijiaxiang@foxmail.com?</span></span>
<span id="cb38-82"><a href="#cb38-82"></a><span class="st">1: No</span></span>
<span id="cb38-83"><a href="#cb38-83"></a><span class="st">2: Absolutely</span></span>
<span id="cb38-84"><a href="#cb38-84"></a><span class="st">3: Uhhhh... Maybe?</span></span>
<span id="cb38-85"><a href="#cb38-85"></a></span>
<span id="cb38-86"><a href="#cb38-86"></a><span class="st">Selection: 2</span></span>
<span id="cb38-87"><a href="#cb38-87"></a><span class="st">Building</span></span>
<span id="cb38-88"><a href="#cb38-88"></a><span class="st">pdflatex not found! Not building PDF manual.</span></span>
<span id="cb38-89"><a href="#cb38-89"></a><span class="st">✓  checking for file &#39;</span>D<span class="op">:</span>\work\add2pkg<span class="op">/</span>DESCRIPTION<span class="st">&#39; (499ms)</span></span>
<span id="cb38-90"><a href="#cb38-90"></a><span class="st">─  preparing &#39;</span>add2pkg<span class="st">&#39;: (1.1s)</span></span>
<span id="cb38-91"><a href="#cb38-91"></a><span class="st">✓  checking DESCRIPTION meta-information ... OK</span></span>
<span id="cb38-92"><a href="#cb38-92"></a><span class="st">─  installing the package to build vignettes</span></span>
<span id="cb38-93"><a href="#cb38-93"></a><span class="st">✓  creating vignettes (7s)</span></span>
<span id="cb38-94"><a href="#cb38-94"></a><span class="st">─  checking for LF line-endings in source and make files and shell scripts (352ms)</span></span>
<span id="cb38-95"><a href="#cb38-95"></a><span class="st">─  checking for empty or unneeded directories</span></span>
<span id="cb38-96"><a href="#cb38-96"></a><span class="st">─  building &#39;</span>add2pkg_<span class="dv">0</span>.<span class="dv">2</span>.<span class="fl">1.</span>tar.gz<span class="st">&#39;</span></span>
<span id="cb38-97"><a href="#cb38-97"></a><span class="st">   </span></span>
<span id="cb38-98"><a href="#cb38-98"></a><span class="st">Submitting file: C:\Users\LIJIAX~1\AppData\Local\Temp\RtmpEdl715/add2pkg_0.2.1.tar.gz</span></span>
<span id="cb38-99"><a href="#cb38-99"></a><span class="st">File size: 7.9 Kb</span></span>
<span id="cb38-100"><a href="#cb38-100"></a><span class="st">Ready to submit add2pkg (0.2.1) to CRAN?</span></span>
<span id="cb38-101"><a href="#cb38-101"></a><span class="st">1: Yes</span></span>
<span id="cb38-102"><a href="#cb38-102"></a><span class="st">2: No way</span></span>
<span id="cb38-103"><a href="#cb38-103"></a><span class="st">3: Uhhhh... Maybe?</span></span>
<span id="cb38-104"><a href="#cb38-104"></a></span>
<span id="cb38-105"><a href="#cb38-105"></a><span class="st">Selection: 1</span></span>
<span id="cb38-106"><a href="#cb38-106"></a><span class="st">Uploading package &amp; comments</span></span>
<span id="cb38-107"><a href="#cb38-107"></a><span class="st">Confirming submission</span></span>
<span id="cb38-108"><a href="#cb38-108"></a><span class="st">Error in if (new_url$query$submit == &quot;1&quot;) { : argument is of length zero</span></span></code></pre></div>
</div>
<div id="r-hub-通过示例" class="section level1">
<h1><span class="header-section-number">21</span> r-hub 通过示例</h1>
<p>自己上传 <a href="https://builder.r-hub.io/" class="uri">https://builder.r-hub.io/</a></p>
<div class="figure">
<img src="https://user-images.githubusercontent.com/15884785/72242811-435bc900-3625-11ea-8ef2-521cf436792b.png" alt="" />
<p class="caption">image</p>
</div>
<p>地址 <a href="https://builder.r-hub.io/status/original/add2pkg_0.2.1.tar.gz-76c7b9d1252c2906bea2aeb92441ec27" class="uri">https://builder.r-hub.io/status/original/add2pkg_0.2.1.tar.gz-76c7b9d1252c2906bea2aeb92441ec27</a></p>
</div>
<div id="上传成功后的邮件" class="section level1">
<h1><span class="header-section-number">22</span> 上传成功后的邮件</h1>
<pre><code>Dear maintainer,
 
package add2pkg_0.2.1.tar.gz has been auto-processed and is pending a manual inspection of this new CRAN submission. A CRAN team member will typically respond to you within the next 10 working days. For technical reasons you may receive a second copy of this message when a team member triggers a new check.
 
Log dir: &lt;https://win-builder.r-project.org/incoming_pretest/add2pkg_0.2.1_20200113_095008/&gt;;
The files will be removed after roughly 7 days.
Installation time in seconds: 25
Check time in seconds: 144
R Under development (unstable) (2020-01-07 r77633)
 
Pretests results:
Windows: &lt;https://win-builder.r-project.org/incoming_pretest/add2pkg_0.2.1_20200113_095008/Windows/00check.log&gt;;
Status: 1 NOTE
Debian: &lt;https://win-builder.r-project.org/incoming_pretest/add2pkg_0.2.1_20200113_095008/Debian/00check.log&gt;;
Status: 1 NOTE
 

 
No strong reverse dependencies to be checked.
 
Best regards,
CRAN teams&#39; auto-check service

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: &#39;Jiaxiang Li &lt;alex.lijiaxiang@foxmail.com&gt;&#39;
 
  New submission
 
  Found the following (possibly) invalid file URI:
    URI: CODE_OF_CONDUCT.md
      From: README.md</code></pre>
</div>
<div id="包含其他文件在包中" class="section level1">
<h1><span class="header-section-number">23</span> 包含其他文件在包中</h1>
<pre><code>Thanks, we see:

   Found the following (possibly) invalid file URI:
     URI: CODE_OF_CONDUCT.md
       From: README.md

Please include the file or link to it via a fully specified URL.
</code></pre>
<p>果然 build 里面是没有 COC 和 LICENSE.md</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dir_tree</span>(<span class="st">&quot;../add2pkg_0.2.1/add2pkg&quot;</span>, <span class="dt">recurse =</span> F)</span>
<span id="cb41-2"><a href="#cb41-2"></a>..<span class="op">/</span>add2pkg_<span class="dv">0</span>.<span class="fl">2.1</span><span class="op">/</span>add2pkg</span>
<span id="cb41-3"><a href="#cb41-3"></a><span class="op">+--</span><span class="st"> </span>build</span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="op">+--</span><span class="st"> </span>DESCRIPTION</span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="op">+--</span><span class="st"> </span>inst</span>
<span id="cb41-6"><a href="#cb41-6"></a><span class="op">+--</span><span class="st"> </span>LICENSE</span>
<span id="cb41-7"><a href="#cb41-7"></a><span class="op">+--</span><span class="st"> </span>man</span>
<span id="cb41-8"><a href="#cb41-8"></a><span class="op">+--</span><span class="st"> </span>NAMESPACE</span>
<span id="cb41-9"><a href="#cb41-9"></a><span class="op">+--</span><span class="st"> </span>NEWS.md</span>
<span id="cb41-10"><a href="#cb41-10"></a><span class="op">+--</span><span class="st"> </span>R</span>
<span id="cb41-11"><a href="#cb41-11"></a><span class="op">+--</span><span class="st"> </span>README.md</span>
<span id="cb41-12"><a href="#cb41-12"></a><span class="op">+--</span><span class="st"> </span>tests</span>
<span id="cb41-13"><a href="#cb41-13"></a>\<span class="op">--</span><span class="st"> </span>vignettes</span></code></pre></div>
<p>r package build include file</p>
<p><code>.Rbuildignore</code>删除</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="op">^</span>LICENSE\.md<span class="op">$</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="er">^</span>CODE_OF_CONDUCT\.md<span class="op">$</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="op">&gt;</span><span class="st"> </span>checking top<span class="op">-</span>level files ... NOTE</span>
<span id="cb43-2"><a href="#cb43-2"></a>  Non<span class="op">-</span>standard files<span class="op">/</span>directories found at top level<span class="op">:</span></span>
<span id="cb43-3"><a href="#cb43-3"></a><span class="st">    &#39;CODE_OF_CONDUCT.md&#39;</span> <span class="st">&#39;LICENSE.md&#39;</span></span>
<span id="cb43-4"><a href="#cb43-4"></a></span>
<span id="cb43-5"><a href="#cb43-5"></a><span class="dv">0</span> errors <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span><span class="st"> </span><span class="er">|</span><span class="st"> </span>Warning <span class="cf">in</span> <span class="kw">readChar</span>(path, <span class="dt">nchars =</span> <span class="kw">file.info</span>(path)<span class="op">$</span>size, ...) <span class="op">:</span></span>
<span id="cb43-6"><a href="#cb43-6"></a><span class="st">  </span>��non<span class="op">-</span>UTF<span class="dv">-8</span> MBCS���Ի�����ֻ�ܶ�ȡ�ֽ�</span>
<span id="cb43-7"><a href="#cb43-7"></a><span class="dv">0</span> warnings <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span><span class="st"> </span><span class="er">|</span><span class="st"> </span><span class="dv">1</span> note x</span>
<span id="cb43-8"><a href="#cb43-8"></a></span>
<span id="cb43-9"><a href="#cb43-9"></a>R CMD check succeeded</span></code></pre></div>
<p>所以最好的策略是用绝对的 GitHub 链接，不要把这种文件链接用相对路径加入到包中，所以修改函数。</p>
</div>
<div id="好好写-description" class="section level1">
<h1><span class="header-section-number">24</span> 好好写 Description</h1>
<pre><code>Perhaps elaborate in the Description field what the package is capable of.

Please fix and resubmit.

Best,
Uwe Ligges</code></pre>
<p>Description 写的太简单了。</p>
</div>
<div id="这个-warning-没有看懂" class="section level1">
<h1><span class="header-section-number">25</span> 这个 warning 没有看懂</h1>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>Warning<span class="op">:</span><span class="st"> </span>add_me.R<span class="op">:</span><span class="dv">7</span><span class="op">:</span><span class="st"> </span><span class="er">@</span>example D<span class="op">:</span>\work\add2pkg<span class="op">/</span><span class="kw">add_me</span>() doesn<span class="st">&#39;t exist</span></span></code></pre></div>
</div>
<div id="fix-mis-spelling" class="section level1">
<h1><span class="header-section-number">26</span> fix mis-spelling</h1>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>  New submission</span>
<span id="cb46-2"><a href="#cb46-2"></a> </span>
<span id="cb46-3"><a href="#cb46-3"></a>  Possibly mis<span class="op">-</span>spelled words <span class="cf">in</span> DESCRIPTION<span class="op">:</span></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="st">    </span><span class="kw">zenodo</span> (<span class="dv">11</span><span class="op">:</span><span class="dv">47</span>)</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">update_wordlist</span>()</span>
<span id="cb47-2"><a href="#cb47-2"></a>DESCRIPTION does not contain <span class="st">&#39;Language&#39;</span> field. Defaulting to <span class="st">&#39;en-US&#39;</span>.</span>
<span id="cb47-3"><a href="#cb47-3"></a>The following words will be added to the wordlist<span class="op">:</span></span>
<span id="cb47-4"><a href="#cb47-4"></a><span class="st"> </span><span class="op">-</span><span class="st"> </span>asis</span>
<span id="cb47-5"><a href="#cb47-5"></a> <span class="op">-</span><span class="st"> </span>BibTex</span>
<span id="cb47-6"><a href="#cb47-6"></a> <span class="op">-</span><span class="st"> </span>coc</span>
<span id="cb47-7"><a href="#cb47-7"></a> <span class="op">-</span><span class="st"> </span>descripton</span>
<span id="cb47-8"><a href="#cb47-8"></a> <span class="op">-</span><span class="st"> </span>dev</span>
<span id="cb47-9"><a href="#cb47-9"></a> <span class="op">-</span><span class="st"> </span>DOI</span>
<span id="cb47-10"><a href="#cb47-10"></a> <span class="op">-</span><span class="st"> </span>Infomation</span>
<span id="cb47-11"><a href="#cb47-11"></a> <span class="op">-</span><span class="st"> </span>params</span>
<span id="cb47-12"><a href="#cb47-12"></a> <span class="op">-</span><span class="st"> </span>README</span>
<span id="cb47-13"><a href="#cb47-13"></a> <span class="op">-</span><span class="st"> </span>zenodo</span>
<span id="cb47-14"><a href="#cb47-14"></a> <span class="op">-</span><span class="st"> </span>Zenodo</span>
<span id="cb47-15"><a href="#cb47-15"></a>Are you sure you want to update the wordlist?</span>
<span id="cb47-16"><a href="#cb47-16"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>Yes</span>
<span id="cb47-17"><a href="#cb47-17"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>No</span></code></pre></div>
<p>所以完全弄干净后，再更新 wordlist
配合<code>document();spell_check()</code>完成。</p>
</div>
<div id="增加数据" class="section level1">
<h1><span class="header-section-number">27</span> 增加数据</h1>
<blockquote>
<p>I highly recommend taking the time to include the code used to do this in the source version of your package. This will make it easy for you to update or reproduce your version of the data.
I suggest that you put this code in <code>data-raw/</code>
<a href="http://r-pkgs.had.co.nz/data.html" class="uri">http://r-pkgs.had.co.nz/data.html</a></p>
</blockquote>
<p>这里需要保留数据的复现方式和数据。</p>
<p>参考 <a href="https://github.com/hadley/babynames/blob/master/data-raw/applicants.R" class="uri">https://github.com/hadley/babynames/blob/master/data-raw/applicants.R</a></p>
<p>我这里使用
<code>usethis::use_data_raw("文件名")</code></p>
<p>然后给复现例子。</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="co">## code to prepare `two_class_example` dataset goes here</span></span>
<span id="cb48-2"><a href="#cb48-2"></a></span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="kw">library</span>(yardstick)</span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="kw">data</span>(<span class="st">&quot;two_class_example&quot;</span>)</span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb48-6"><a href="#cb48-6"></a>two_class_example_edited &lt;-</span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="st">    </span>two_class_example <span class="op">%&gt;%</span></span>
<span id="cb48-8"><a href="#cb48-8"></a><span class="st">    </span><span class="kw">transmute</span>(</span>
<span id="cb48-9"><a href="#cb48-9"></a>        <span class="dt">y =</span> <span class="kw">ifelse</span>(truth <span class="op">==</span><span class="st"> &quot;Class1&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb48-10"><a href="#cb48-10"></a>        ,<span class="dt">yhat =</span> Class1</span>
<span id="cb48-11"><a href="#cb48-11"></a>    )</span>
<span id="cb48-12"><a href="#cb48-12"></a>two_class_example_edited <span class="op">%&gt;%</span><span class="st"> </span>head</span>
<span id="cb48-13"><a href="#cb48-13"></a>two_class_example_edited <span class="op">%&gt;%</span></span>
<span id="cb48-14"><a href="#cb48-14"></a><span class="st">    </span><span class="kw">write_excel_csv</span>(<span class="st">&quot;data-raw/two_class_example.csv&quot;</span>)</span>
<span id="cb48-15"><a href="#cb48-15"></a></span>
<span id="cb48-16"><a href="#cb48-16"></a>usethis<span class="op">::</span><span class="kw">use_data</span>(two_class_example_edited, <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>然后增加例子。</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="co">#&#39; data(&quot;two_class_example_edited&quot;)</span></span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="co">#&#39; max(ks_table(two_class_example_edited$yhat, two_class_example_edited$y)$ks)</span></span></code></pre></div>
</div>
<div id="增加-examples" class="section level1">
<h1><span class="header-section-number">28</span> 增加 examples</h1>
<p>参考 <a href="http://r-pkgs.had.co.nz/man.html" class="uri">http://r-pkgs.had.co.nz/man.html</a></p>
<p><code>@examples</code> 只要是多行都可以吧？</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="co">#&#39; sum(1:10)</span></span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="co">#&#39; sum(1:5, 6:10)</span></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="co">#&#39; sum(F, F, F, T, T)</span></span></code></pre></div>
</div>
<div id="增加数据文档" class="section level1">
<h1><span class="header-section-number">29</span> 增加数据文档</h1>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">-----------------------------------</span><span class="st"> </span>rawKS <span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9000</span> <span class="op">----</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>Duration<span class="op">:</span><span class="st"> </span>1m <span class="fl">7.2</span>s</span>
<span id="cb51-3"><a href="#cb51-3"></a></span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="op">&gt;</span><span class="st"> </span>checking <span class="cf">for</span> missing documentation entries ... WARNING</span>
<span id="cb51-5"><a href="#cb51-5"></a>  Undocumented code objects<span class="op">:</span></span>
<span id="cb51-6"><a href="#cb51-6"></a><span class="st">    &#39;ks_plot&#39;</span> <span class="st">&#39;two_class_example_edited&#39;</span></span>
<span id="cb51-7"><a href="#cb51-7"></a>  Undocumented data sets<span class="op">:</span></span>
<span id="cb51-8"><a href="#cb51-8"></a><span class="st">    &#39;two_class_example_edited&#39;</span></span>
<span id="cb51-9"><a href="#cb51-9"></a>  All user<span class="op">-</span>level objects <span class="cf">in</span> a package should have documentation entries.</span>
<span id="cb51-10"><a href="#cb51-10"></a>  See chapter <span class="st">&#39;Writing R documentation files&#39;</span> <span class="cf">in</span> the <span class="st">&#39;Writing R</span></span>
<span id="cb51-11"><a href="#cb51-11"></a><span class="st">  Extensions&#39;</span> manual.</span></code></pre></div>
<p>如模板</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co">#&#39; Prices of 50,000 round cut diamonds.</span></span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="co">#&#39;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a><span class="co">#&#39; A dataset containing the prices and other attributes of almost 54,000</span></span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="co">#&#39; diamonds.</span></span>
<span id="cb52-5"><a href="#cb52-5"></a><span class="co">#&#39;</span></span>
<span id="cb52-6"><a href="#cb52-6"></a><span class="co">#&#39; @format A data frame with 53940 rows and 10 variables:</span></span>
<span id="cb52-7"><a href="#cb52-7"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb52-8"><a href="#cb52-8"></a><span class="co">#&#39;   \item{price}{price, in US dollars}</span></span>
<span id="cb52-9"><a href="#cb52-9"></a><span class="co">#&#39;   \item{carat}{weight of the diamond, in carats}</span></span>
<span id="cb52-10"><a href="#cb52-10"></a><span class="co">#&#39;   ...</span></span>
<span id="cb52-11"><a href="#cb52-11"></a><span class="co">#&#39; }</span></span>
<span id="cb52-12"><a href="#cb52-12"></a><span class="co">#&#39; @source \url{http://www.diamondse.info/}</span></span>
<span id="cb52-13"><a href="#cb52-13"></a><span class="st">&quot;diamonds&quot;</span></span></code></pre></div>
<p>再如</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co">#&#39; A sample with the target and predictions</span></span>
<span id="cb53-2"><a href="#cb53-2"></a><span class="co">#&#39;</span></span>
<span id="cb53-3"><a href="#cb53-3"></a><span class="co">#&#39; A dataset containing two columns, \code{yhat} and \code{y} as</span></span>
<span id="cb53-4"><a href="#cb53-4"></a><span class="co">#&#39; the inputs for the function \code{ks_table}.</span></span>
<span id="cb53-5"><a href="#cb53-5"></a><span class="co">#&#39;</span></span>
<span id="cb53-6"><a href="#cb53-6"></a><span class="co">#&#39; @format A data frame with 500 rows and 2 variables:</span></span>
<span id="cb53-7"><a href="#cb53-7"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb53-8"><a href="#cb53-8"></a><span class="co">#&#39;   \item{yhat}{predictions}</span></span>
<span id="cb53-9"><a href="#cb53-9"></a><span class="co">#&#39;   \item{y}{target}</span></span>
<span id="cb53-10"><a href="#cb53-10"></a><span class="co">#&#39; }</span></span>
<span id="cb53-11"><a href="#cb53-11"></a><span class="co">#&#39; @source package \code{yardstick::two_class_example}</span></span>
<span id="cb53-12"><a href="#cb53-12"></a><span class="st">&quot;two_class_example_edited&quot;</span></span></code></pre></div>
</div>
<div id="加入-r-版本" class="section level1">
<h1><span class="header-section-number">30</span> 加入 R 版本</h1>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">-----------------------------------</span><span class="st"> </span>rawKS <span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9000</span> <span class="op">----</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">44.8</span>s</span>
<span id="cb54-3"><a href="#cb54-3"></a></span>
<span id="cb54-4"><a href="#cb54-4"></a><span class="op">&gt;</span><span class="st"> </span>checking data <span class="cf">for</span> ASCII and uncompressed saves ... WARNING</span>
<span id="cb54-5"><a href="#cb54-5"></a>    Warning<span class="op">:</span><span class="st"> </span>package needs dependence on <span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="fl">2.10</span>)</span>
<span id="cb54-6"><a href="#cb54-6"></a></span>
<span id="cb54-7"><a href="#cb54-7"></a><span class="dv">0</span> errors <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span><span class="st"> </span><span class="er">|</span><span class="st"> </span><span class="dv">1</span> warning x <span class="op">|</span><span class="st"> </span><span class="dv">0</span> notes <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span></span>
<span id="cb54-8"><a href="#cb54-8"></a>Warning <span class="cf">in</span> <span class="kw">readChar</span>(path, <span class="dt">nchars =</span> <span class="kw">file.info</span>(path)<span class="op">$</span>size, ...) <span class="op">:</span></span>
<span id="cb54-9"><a href="#cb54-9"></a><span class="st">  </span>��non<span class="op">-</span>UTF<span class="dv">-8</span> MBCS���Ի�����ֻ�ܶ�ȡ�ֽ�</span>
<span id="cb54-10"><a href="#cb54-10"></a>����<span class="op">:</span><span class="st"> </span>R CMD check found WARNINGs</span>
<span id="cb54-11"><a href="#cb54-11"></a>ִֹͣ��</span>
<span id="cb54-12"><a href="#cb54-12"></a></span>
<span id="cb54-13"><a href="#cb54-13"></a>Exited with status <span class="fl">1.</span></span></code></pre></div>
<p>R 版本没有限制，
参考 <a href="https://github.com/USGS-R/loadflex/issues/25" class="uri">https://github.com/USGS-R/loadflex/issues/25</a></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>Depends<span class="op">:</span></span>
<span id="cb55-2"><a href="#cb55-2"></a><span class="st">    </span><span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="fl">2.10</span>)</span></code></pre></div>
</div>
<div id="r-版本限制" class="section level1">
<h1><span class="header-section-number">31</span> R 版本限制</h1>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">-----------------------------------</span><span class="st"> </span>add2bibtex <span class="dv">0</span>.<span class="fl">5.2</span> <span class="op">----</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">48.8</span>s</span>
<span id="cb56-3"><a href="#cb56-3"></a></span>
<span id="cb56-4"><a href="#cb56-4"></a><span class="op">&gt;</span><span class="st"> </span>checking DESCRIPTION meta<span class="op">-</span>information ... WARNING</span>
<span id="cb56-5"><a href="#cb56-5"></a>  Dependence on R version <span class="st">&#39;3.5.1&#39;</span> not with patchlevel <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>Version<span class="op">:</span><span class="st"> </span><span class="dv">0</span>.<span class="fl">5.2</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>Authors<span class="op">@</span>R<span class="op">:</span></span>
<span id="cb57-3"><a href="#cb57-3"></a><span class="st">    </span><span class="kw">person</span>(<span class="dt">given =</span> <span class="st">&quot;Jiaxiang&quot;</span>,</span>
<span id="cb57-4"><a href="#cb57-4"></a>           <span class="dt">family =</span> <span class="st">&quot;Li&quot;</span>,</span>
<span id="cb57-5"><a href="#cb57-5"></a>           <span class="dt">role =</span> <span class="kw">c</span>(<span class="st">&quot;aut&quot;</span>, <span class="st">&quot;cre&quot;</span>),</span>
<span id="cb57-6"><a href="#cb57-6"></a>           <span class="dt">email =</span> <span class="st">&quot;alex.lijiaxiang@foxmail.com&quot;</span>,</span>
<span id="cb57-7"><a href="#cb57-7"></a>           <span class="dt">comment =</span> <span class="kw">c</span>(<span class="dt">ORCID =</span> <span class="st">&quot;https://orcid.org/0000-0003-3196-6492&quot;</span>))</span>
<span id="cb57-8"><a href="#cb57-8"></a>Description<span class="op">:</span><span class="st"> </span>Easily Adding Bibliographies and Citations.</span>
<span id="cb57-9"><a href="#cb57-9"></a>Depends<span class="op">:</span><span class="st"> </span><span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.1</span>)</span></code></pre></div>
<p>参考 <a href="https://stackoverflow.com/a/48433479/8625228" class="uri">https://stackoverflow.com/a/48433479/8625228</a></p>
<p>这里如果 Version 要 <code>0.5.2</code>，那么<code>Depends: R (&gt;= 3.5.1)</code>中改为<code>3.5.0</code>。</p>
</div>
<div id="查看-non-ascii-文本" class="section level1">
<h1><span class="header-section-number">32</span> 查看 non-ASCII 文本</h1>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">-----------------------------------</span><span class="st"> </span>add2bibtex <span class="dv">0</span>.<span class="fl">5.2</span> <span class="op">----</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>Duration<span class="op">:</span><span class="st"> </span>1m 60s</span>
<span id="cb58-3"><a href="#cb58-3"></a></span>
<span id="cb58-4"><a href="#cb58-4"></a><span class="op">&gt;</span><span class="st"> </span>checking R files <span class="cf">for</span> non<span class="op">-</span>ASCII characters ... WARNING</span>
<span id="cb58-5"><a href="#cb58-5"></a>  Found the following files with non<span class="op">-</span>ASCII characters<span class="op">:</span></span>
<span id="cb58-6"><a href="#cb58-6"></a><span class="st">    </span>add_amazon_cn.R</span>
<span id="cb58-7"><a href="#cb58-7"></a>    add_bibtex.R</span>
<span id="cb58-8"><a href="#cb58-8"></a>    add_wechat.R</span>
<span id="cb58-9"><a href="#cb58-9"></a>  Portable packages must use only ASCII characters <span class="cf">in</span> their R code,</span>
<span id="cb58-10"><a href="#cb58-10"></a>  except perhaps <span class="cf">in</span> comments.</span>
<span id="cb58-11"><a href="#cb58-11"></a>  Use \uxxxx escapes <span class="cf">for</span> other characters.</span></code></pre></div>
<p>参考 <a href="https://stackoverflow.com/a/34614485/8625228" class="uri">https://stackoverflow.com/a/34614485/8625228</a></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>lines &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_lines</span>(<span class="st">&quot;R/add_wechat.R&quot;</span>)</span>
<span id="cb59-2"><a href="#cb59-2"></a>lines[<span class="op">!</span>stringi<span class="op">::</span><span class="kw">stri_enc_isascii</span>(lines)]</span></code></pre></div>
</div>
<div id="注意-non-acsii-在-rd-的出现" class="section level1">
<h1><span class="header-section-number">33</span> 注意 non-ACSII 在 Rd 的出现</h1>
<blockquote>
<ul>
<li>checking PDF version of manual without hyperrefs or index … ERROR
<a href="https://builder.r-hub.io/status/add2bibtex_0.5.2.tar.gz-09adbbfcbe3f639a67fc783068b40898" class="uri">https://builder.r-hub.io/status/add2bibtex_0.5.2.tar.gz-09adbbfcbe3f639a67fc783068b40898</a></li>
</ul>
</blockquote>
<p>在 R 文件中</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>add_tail_refs &lt;-</span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="st">    </span><span class="cf">function</span>(<span class="dt">path =</span> <span class="st">&quot;jiangning_weaving/analysis/para_length_5_notes.Rmd&quot;</span>, <span class="dt">append_text =</span> <span class="st">&#39;[@\u5434\u851a_2017\u6c5f\u5b81\u7ec7\u9020]&#39;</span>) {</span>
<span id="cb60-3"><a href="#cb60-3"></a>        lines &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_lines</span>(path)</span>
<span id="cb60-4"><a href="#cb60-4"></a>        quote_index &lt;-<span class="st"> </span>lines <span class="op">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5"></a><span class="st">            </span>stringr<span class="op">::</span><span class="kw">str_which</span>(<span class="st">&quot;^&gt;</span><span class="ch">\\</span><span class="st">s&quot;</span>)</span>
<span id="cb60-6"><a href="#cb60-6"></a>        lines[quote_index] &lt;-<span class="st"> </span><span class="kw">paste</span>(lines[quote_index], append_text)</span>
<span id="cb60-7"><a href="#cb60-7"></a>        lines <span class="op">%&gt;%</span><span class="st"> </span>readr<span class="op">::</span><span class="kw">write_lines</span>(path)</span>
<span id="cb60-8"><a href="#cb60-8"></a>    }</span></code></pre></div>
<p>进行了 unicode 转码，但是在 <code>.Rd</code> 文件中变成了中文。</p>
<pre class="rd"><code>% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_tail_refs.R
\name{add_tail_refs}
\alias{add_tail_refs}
\title{Add reference tag into quote paragraphs.}
\usage{

  add_tail_refs(path = &quot;jiangning_weaving/analysis/para_length_5_notes.Rmd&quot;,
  append_text = &quot;[@吴蔚_2017江宁织造&quot;)
}
\arguments{
\item{path}{The RMarkdown document path.}

\item{append_text}{The BibTex alias.}
}
\description{
Add reference tag into quote paragraphs.
}</code></pre>
</div>
<div id="删除不用的包" class="section level1">
<h1><span class="header-section-number">34</span> 删除不用的包</h1>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a></span>
<span id="cb62-2"><a href="#cb62-2"></a>Build ID<span class="op">:</span><span class="st">   </span>add2md_<span class="dv">1</span>.<span class="dv">1</span>.<span class="fl">1.</span>tar.gz<span class="fl">-20e671205873580</span>fb77ce80d9cce7aae</span>
<span id="cb62-3"><a href="#cb62-3"></a>Platform<span class="op">:</span><span class="st">   </span>Debian Linux, R<span class="op">-</span>devel, GCC</span>
<span id="cb62-4"><a href="#cb62-4"></a>Submitted<span class="op">:</span><span class="st">  </span><span class="dv">18</span> minutes <span class="fl">44.5</span> seconds ago</span>
<span id="cb62-5"><a href="#cb62-5"></a>Build time<span class="op">:</span><span class="st"> </span><span class="dv">18</span> minutes <span class="fl">42.2</span> seconds</span>
<span id="cb62-6"><a href="#cb62-6"></a>NOTES<span class="op">:</span></span>
<span id="cb62-7"><a href="#cb62-7"></a><span class="er">*</span><span class="st"> </span>checking dependencies <span class="cf">in</span> R code ... NOTE</span>
<span id="cb62-8"><a href="#cb62-8"></a>Namespaces <span class="cf">in</span> Imports field not imported from<span class="op">:</span></span>
<span id="cb62-9"><a href="#cb62-9"></a><span class="st">  </span>‘data.tree’ ‘git2r’ ‘tibble’</span>
<span id="cb62-10"><a href="#cb62-10"></a>  All declared Imports should be used.</span></code></pre></div>
</div>
<div id="回复速度" class="section level1">
<h1><span class="header-section-number">35</span> 回复速度</h1>
<p>的确是晚上回复比较快。</p>
</div>
<div id="标题大小写问题" class="section level1">
<h1><span class="header-section-number">36</span> 标题大小写问题</h1>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>Thanks, we see<span class="op">:</span></span>
<span id="cb63-2"><a href="#cb63-2"></a></span>
<span id="cb63-3"><a href="#cb63-3"></a><span class="st">   </span>The Title field should be <span class="cf">in</span> title case. Current version is<span class="op">:</span></span>
<span id="cb63-4"><a href="#cb63-4"></a><span class="st">   &#39;Easily get TPR, FPR and KS statistic&#39;</span></span>
<span id="cb63-5"><a href="#cb63-5"></a>   In title case that is<span class="op">:</span></span>
<span id="cb63-6"><a href="#cb63-6"></a><span class="st">   &#39;Easily Get TPR, FPR and KS Statistic&#39;</span></span></code></pre></div>
<p>注意这里 除了 <code>in</code>， <code>and</code> 进行小写以外，<code>Get</code> 需要大写。
可以参考 <a href="https://cran.r-project.org/web/packages/gluedown/" class="uri">https://cran.r-project.org/web/packages/gluedown/</a></p>
<blockquote>
<p>gluedown: Wrap Vectors in Markdown Formatting</p>
</blockquote>
</div>
<div id="elaborate-description" class="section level1">
<h1><span class="header-section-number">37</span> elaborate Description</h1>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>In the Description field, pelase elaborate. Is there some reference</span>
<span id="cb64-2"><a href="#cb64-2"></a>about the method you can add <span class="cf">in</span> the Description field <span class="cf">in</span> the form</span>
<span id="cb64-3"><a href="#cb64-3"></a><span class="kw">Authors</span> (year) <span class="op">&lt;</span>doi<span class="op">:</span>.....<span class="op">&gt;</span>?</span>
<span id="cb64-4"><a href="#cb64-4"></a></span>
<span id="cb64-5"><a href="#cb64-5"></a></span>
<span id="cb64-6"><a href="#cb64-6"></a>Please fix and resubmit.</span></code></pre></div>
<p>这是 gluedown 的模板 <a href="https://github.com/kiernann/gluedown/blob/master/DESCRIPTION" class="uri">https://github.com/kiernann/gluedown/blob/master/DESCRIPTION</a></p>
<blockquote>
<p>Ease the transition between R vectors and markdown text. With ‘gluedown’ and ‘rmarkdown’, users can create traditional vectors in R, glue those strings together with the markdown syntax, and print those formatted vectors directly to the document. This package primarily uses GitHub Flavored Markdown (GFM), an offshoot of the unambiguous CommonMark specification by John MacFarlane (2019) <a href="https://spec.commonmark.org/" class="uri">https://spec.commonmark.org/</a>.</p>
</blockquote>
<p>最后的完成情况。</p>
<blockquote>
<p>The “K–S statistic” is a standard method to measure the model strength for credit risk scoring models. This package calculates the “K–S statistic” and plots the true-positive rate and false-positive rate to measure the model strength. This package was written with the credit marketer, who uses risk models in conjunction with his campaigns. The users could read more details from Thrasher (1992) <a href="doi:https://doi.org/10.1002/dir.4000060408" class="uri">doi:https://doi.org/10.1002/dir.4000060408</a> and a Python version ‘pyks’ <a href="https://pypi.org/project/pyks/" class="uri">https://pypi.org/project/pyks/</a>.</p>
</blockquote>
<p>也参考 <a href="https://www.jianshu.com/p/aee69df9e041" class="uri">https://www.jianshu.com/p/aee69df9e041</a></p>
<pre><code>authors (year) &lt;doi:...&gt;
authors (year) &lt;arXiv:...&gt;
authors (year, ISBN:...)
&lt;https:...&gt;</code></pre>
</div>
<div id="标题特殊拼写处理" class="section level1">
<h1><span class="header-section-number">38</span> 标题特殊拼写处理</h1>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>  New submission</span>
<span id="cb66-2"><a href="#cb66-2"></a> </span>
<span id="cb66-3"><a href="#cb66-3"></a>  Possibly mis<span class="op">-</span>spelled words <span class="cf">in</span> DESCRIPTION<span class="op">:</span></span>
<span id="cb66-4"><a href="#cb66-4"></a><span class="st">    </span><span class="kw">BibTex</span> (<span class="dv">2</span><span class="op">:</span><span class="dv">15</span>)</span></code></pre></div>
<p>不确定的话，就全部用 title case 完成，如包 <code>bibtex</code>
这样重复的话，用 readme read child 放过来。</p>
<pre><code>bibtex: Bibtex Parser</code></pre>
</div>
<div id="失效的链接" class="section level1">
<h1><span class="header-section-number">39</span> 失效的链接</h1>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>  New submission</span>
<span id="cb68-2"><a href="#cb68-2"></a> </span>
<span id="cb68-3"><a href="#cb68-3"></a>  Found the <span class="kw">following</span> (possibly) invalid URLs<span class="op">:</span></span>
<span id="cb68-4"><a href="#cb68-4"></a><span class="st">    </span>URL<span class="op">:</span><span class="st"> </span>https<span class="op">:</span><span class="er">//</span>raw.githubusercontent.com<span class="op">/</span>JiaxiangBU<span class="op">/</span>picbackup<span class="op">/</span>master<span class="op">/</span>add2blog_sample_wallpaper.png</span>
<span id="cb68-5"><a href="#cb68-5"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>introduction.html</span>
<span id="cb68-6"><a href="#cb68-6"></a>      Status<span class="op">:</span><span class="st"> </span><span class="dv">404</span></span>
<span id="cb68-7"><a href="#cb68-7"></a>      Message<span class="op">:</span><span class="st"> </span>Not Found</span>
<span id="cb68-8"><a href="#cb68-8"></a> </span>
<span id="cb68-9"><a href="#cb68-9"></a>  Found the <span class="kw">following</span> (possibly) invalid file URIs<span class="op">:</span></span>
<span id="cb68-10"><a href="#cb68-10"></a><span class="st">    </span>URI<span class="op">:</span><span class="st"> </span>www.example.com</span>
<span id="cb68-11"><a href="#cb68-11"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>url.html</span>
<span id="cb68-12"><a href="#cb68-12"></a>    URI<span class="op">:</span><span class="st"> </span>weirdlink</span>
<span id="cb68-13"><a href="#cb68-13"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>url.html</span>
<span id="cb68-14"><a href="#cb68-14"></a>    URI<span class="op">:</span><span class="st"> </span>data<span class="op">/</span>whitehouse.csv</span>
<span id="cb68-15"><a href="#cb68-15"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>url.html</span>
<span id="cb68-16"><a href="#cb68-16"></a>    URI<span class="op">:</span><span class="st"> </span>app.yinxiang.com</span>
<span id="cb68-17"><a href="#cb68-17"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>url.html</span>
<span id="cb68-18"><a href="#cb68-18"></a>    URI<span class="op">:</span><span class="st"> </span>app.evernote.com</span>
<span id="cb68-19"><a href="#cb68-19"></a>      From<span class="op">:</span><span class="st"> </span>inst<span class="op">/</span>doc<span class="op">/</span>url.html</span>
<span id="cb68-20"><a href="#cb68-20"></a>    URI<span class="op">:</span><span class="st"> </span>.github<span class="op">/</span>CODE_OF_CONDUCT.md</span>
<span id="cb68-21"><a href="#cb68-21"></a>      From<span class="op">:</span><span class="st"> </span>README.md</span>
<span id="cb68-22"><a href="#cb68-22"></a>    URI<span class="op">:</span><span class="st"> </span>LICENSE.md</span>
<span id="cb68-23"><a href="#cb68-23"></a>      From<span class="op">:</span><span class="st"> </span>README.md</span>
<span id="cb68-24"><a href="#cb68-24"></a></span>
<span id="cb68-25"><a href="#cb68-25"></a>Flavor<span class="op">:</span><span class="st"> </span>r<span class="op">-</span>devel<span class="op">-</span>linux<span class="op">-</span>x86_<span class="dv">64</span><span class="op">-</span>debian<span class="op">-</span>gcc, r<span class="op">-</span>devel<span class="op">-</span>windows<span class="op">-</span>ix86<span class="op">+</span>x86_<span class="dv">64</span></span>
<span id="cb68-26"><a href="#cb68-26"></a>Check<span class="op">:</span><span class="st"> </span>package vignettes, Result<span class="op">:</span><span class="st"> </span>NOTE</span>
<span id="cb68-27"><a href="#cb68-27"></a>  Package vignette with placeholder title <span class="st">&#39;Vignette Title&#39;</span><span class="op">:</span></span>
<span id="cb68-28"><a href="#cb68-28"></a><span class="st">    &#39;url.Rmd&#39;</span></span></code></pre></div>
<p>这种链接只是用来举例子的，不一定真的存在，所以直接消除。</p>
</div>
<div id="bib-文件的位置" class="section level1">
<h1><span class="header-section-number">40</span> bib 文件的位置</h1>
<p>参考 <a href="https://github.com/yihui/knitr/blob/master/inst/examples/knitr-manual.bib" class="uri">https://github.com/yihui/knitr/blob/master/inst/examples/knitr-manual.bib</a></p>
<p>放在 <code>inst/examples</code></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="op">&gt;</span><span class="st"> </span>checking top<span class="op">-</span>level files ... NOTE</span>
<span id="cb69-2"><a href="#cb69-2"></a>  Non<span class="op">-</span>standard files<span class="op">/</span>directories found at top level<span class="op">:</span></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="st">    &#39;add.bib&#39;</span> <span class="st">&#39;docs&#39;</span></span></code></pre></div>
</div>
<div id="默认函数加上-import" class="section level1">
<h1><span class="header-section-number">41</span> 默认函数加上 import</h1>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="op">&gt;</span><span class="st"> </span>checking R code <span class="cf">for</span> possible problems ... NOTE</span>
<span id="cb70-2"><a href="#cb70-2"></a>  irr<span class="op">:</span><span class="st"> </span>no visible global <span class="cf">function</span> definition <span class="cf">for</span> <span class="st">&#39;optimise&#39;</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>  Undefined global functions or variables<span class="op">:</span></span>
<span id="cb70-4"><a href="#cb70-4"></a><span class="st">    </span>optimise</span>
<span id="cb70-5"><a href="#cb70-5"></a>  Consider adding</span>
<span id="cb70-6"><a href="#cb70-6"></a>    <span class="kw">importFrom</span>(<span class="st">&quot;stats&quot;</span>, <span class="st">&quot;optimise&quot;</span>)</span>
<span id="cb70-7"><a href="#cb70-7"></a>  to your NAMESPACE file.</span>
<span id="cb70-8"><a href="#cb70-8"></a></span>
<span id="cb70-9"><a href="#cb70-9"></a><span class="dv">0</span> errors <span class="op">&lt;</span>U<span class="op">+</span><span class="dv">2713</span><span class="op">&gt;</span><span class="st"> </span><span class="er">|</span><span class="st"> </span><span class="dv">3</span> warnings x <span class="op">|</span><span class="st"> </span><span class="dv">2</span> notes x</span>
<span id="cb70-10"><a href="#cb70-10"></a>����<span class="op">:</span><span class="st"> </span>R CMD check found WARNINGs</span>
<span id="cb70-11"><a href="#cb70-11"></a>ִֹͣ��</span>
<span id="cb70-12"><a href="#cb70-12"></a></span>
<span id="cb70-13"><a href="#cb70-13"></a>Exited with status <span class="fl">1.</span></span></code></pre></div>
<p>这里 <code>importFrom("stats", "optimise")</code> 是的确的。</p>
</div>
<div id="pending-a-manual-inspection" class="section level1">
<h1><span class="header-section-number">42</span> pending a manual inspection</h1>
<blockquote>
<p>package rawKS_0.1.0.tar.gz has been auto-processed and is pending a manual inspection. A CRAN team member will typically respond to you within the next <strong>5 working days</strong>. For technical reasons you may receive a second copy of this message when a team member triggers a new check.</p>
</blockquote>
<p>这个一般会缩短到5个工作日内回复。</p>
</div>
<div id="正确的doi书写" class="section level1">
<h1><span class="header-section-number">43</span> 正确的DOI书写</h1>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a> </span>
<span id="cb71-2"><a href="#cb71-2"></a>  Found the <span class="kw">following</span> (possibly) invalid URLs<span class="op">:</span></span>
<span id="cb71-3"><a href="#cb71-3"></a><span class="st">    </span>URL<span class="op">:</span><span class="st"> </span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span></span>
<span id="cb71-4"><a href="#cb71-4"></a>      From<span class="op">:</span><span class="st"> </span>DESCRIPTION</span>
<span id="cb71-5"><a href="#cb71-5"></a>      Status<span class="op">:</span><span class="st"> </span>Error</span>
<span id="cb71-6"><a href="#cb71-6"></a>      Message<span class="op">:</span><span class="st"> </span>libcurl error code <span class="dv">28</span><span class="op">:</span></span>
<span id="cb71-7"><a href="#cb71-7"></a><span class="st">        </span>Failed to connect to doi.wiley.com port <span class="dv">80</span><span class="op">:</span><span class="st"> </span>Connection timed out</span>
<span id="cb71-8"><a href="#cb71-8"></a> </span>
<span id="cb71-9"><a href="#cb71-9"></a>  Found the <span class="kw">following</span> (possibly) invalid DOIs<span class="op">:</span></span>
<span id="cb71-10"><a href="#cb71-10"></a><span class="st">    </span>DOI<span class="op">:</span><span class="st"> </span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span></span>
<span id="cb71-11"><a href="#cb71-11"></a>      From<span class="op">:</span><span class="st"> </span>DESCRIPTION</span>
<span id="cb71-12"><a href="#cb71-12"></a>      Message<span class="op">:</span><span class="st"> </span>Invalid DOI</span>
<span id="cb71-13"><a href="#cb71-13"></a> </span>
<span id="cb71-14"><a href="#cb71-14"></a>  The Description field contains</span>
<span id="cb71-15"><a href="#cb71-15"></a>    <span class="op">&lt;</span>doi<span class="op">:</span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span><span class="op">&gt;</span>; and a Python version</span>
<span id="cb71-16"><a href="#cb71-16"></a>  Please enclose URLs <span class="cf">in</span> angle <span class="kw">brackets</span> (<span class="op">&lt;</span>...<span class="op">&gt;</span>).</span>
<span id="cb71-17"><a href="#cb71-17"></a>  The Description field contains</span>
<span id="cb71-18"><a href="#cb71-18"></a>    <span class="op">&lt;</span>doi<span class="op">:</span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span><span class="op">&gt;</span>; and a Python version</span>
<span id="cb71-19"><a href="#cb71-19"></a>  Please write DOIs as <span class="op">&lt;</span>doi<span class="op">:</span><span class="fl">10.</span>prefix<span class="op">/</span>suffix<span class="op">&gt;</span>.</span></code></pre></div>
<p>以下为例，参考 <a href="https://onlinelibrary.wiley.com/action/showCitFormats?doi=10.1002%2Fdir.4000060408" class="uri">https://onlinelibrary.wiley.com/action/showCitFormats?doi=10.1002%2Fdir.4000060408</a></p>
<blockquote>
<p>Thrasher, R.P. (1992), A note on the use of the K–S statistic as a measure of model strength. J. Direct Mark., 6: 40-47. <a href="doi:10.1002/dir.4000060408" class="uri">doi:10.1002/dir.4000060408</a></p>
</blockquote>
<p><code>doi:10.1002/dir.4000060408</code> 就是我们需要的，格式为<code>&lt;doi:10.prefix/suffix&gt;</code></p>
</div>
<div id="vignette-yaml-报错" class="section level1">
<h1><span class="header-section-number">44</span> Vignette yaml 报错</h1>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>  New submission</span>
<span id="cb72-2"><a href="#cb72-2"></a></span>
<span id="cb72-3"><a href="#cb72-3"></a>Flavor<span class="op">:</span><span class="st"> </span>r<span class="op">-</span>devel<span class="op">-</span>linux<span class="op">-</span>x86_<span class="dv">64</span><span class="op">-</span>debian<span class="op">-</span>gcc, r<span class="op">-</span>devel<span class="op">-</span>windows<span class="op">-</span>ix86<span class="op">+</span>x86_<span class="dv">64</span></span>
<span id="cb72-4"><a href="#cb72-4"></a>Check<span class="op">:</span><span class="st"> </span>package vignettes, Result<span class="op">:</span><span class="st"> </span>NOTE</span>
<span id="cb72-5"><a href="#cb72-5"></a>  Package vignette with placeholder title <span class="st">&#39;Vignette Title&#39;</span><span class="op">:</span></span>
<span id="cb72-6"><a href="#cb72-6"></a><span class="st">    &#39;more_for_url.Rmd&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="op">---</span></span>
<span id="cb73-2"><a href="#cb73-2"></a>title<span class="op">:</span><span class="st"> &quot;More for URL&quot;</span></span>
<span id="cb73-3"><a href="#cb73-3"></a>author<span class="op">:</span><span class="st"> &quot;Jiaxiang Li&quot;</span></span>
<span id="cb73-4"><a href="#cb73-4"></a>date<span class="op">:</span><span class="st"> &quot;2020-06-08&quot;</span></span>
<span id="cb73-5"><a href="#cb73-5"></a>output<span class="op">:</span><span class="st"> </span>rmarkdown<span class="op">::</span>html_vignette</span>
<span id="cb73-6"><a href="#cb73-6"></a>vignette<span class="op">:</span><span class="st"> </span><span class="er">&gt;</span></span>
<span id="cb73-7"><a href="#cb73-7"></a><span class="st">  </span>%\VignetteIndexEntry{Vignette Title}</span>
<span id="cb73-8"><a href="#cb73-8"></a>  %\VignetteEngine{knitr<span class="op">::</span>rmarkdown}</span>
<span id="cb73-9"><a href="#cb73-9"></a>  %\VignetteEncoding{UTF<span class="dv">-8</span>}</span>
<span id="cb73-10"><a href="#cb73-10"></a><span class="op">---</span></span></code></pre></div>
<p>在对应的 vignette 中 yaml 写着<code>%\VignetteIndexEntry{Vignette Title}</code>，没有自定义导致的。</p>
</div>
<div id="desc-避免使用双引号" class="section level1">
<h1><span class="header-section-number">45</span> DESC 避免使用双引号</h1>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>Thanks, we see<span class="op">:</span></span>
<span id="cb74-2"><a href="#cb74-2"></a></span>
<span id="cb74-3"><a href="#cb74-3"></a><span class="st">   </span>Found the <span class="kw">following</span> (possibly) invalid DOIs<span class="op">:</span></span>
<span id="cb74-4"><a href="#cb74-4"></a><span class="st">     </span>DOI<span class="op">:</span><span class="st"> </span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span></span>
<span id="cb74-5"><a href="#cb74-5"></a>       From<span class="op">:</span><span class="st"> </span>DESCRIPTION</span>
<span id="cb74-6"><a href="#cb74-6"></a>       Message<span class="op">:</span><span class="st"> </span>Invalid DOI</span>
<span id="cb74-7"><a href="#cb74-7"></a></span>
<span id="cb74-8"><a href="#cb74-8"></a>   The Description field contains</span>
<span id="cb74-9"><a href="#cb74-9"></a>     <span class="op">&lt;</span>doi<span class="op">:</span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span><span class="op">&gt;</span>; and a Python version</span>
<span id="cb74-10"><a href="#cb74-10"></a>   Please enclose URLs <span class="cf">in</span> angle <span class="kw">brackets</span> (<span class="op">&lt;</span>...<span class="op">&gt;</span>).</span>
<span id="cb74-11"><a href="#cb74-11"></a>   The Description field contains</span>
<span id="cb74-12"><a href="#cb74-12"></a>     <span class="op">&lt;</span>doi<span class="op">:</span>https<span class="op">:</span><span class="er">//</span>doi.org<span class="op">/</span><span class="fl">10.1002</span><span class="op">/</span>dir<span class="fl">.4000060408</span><span class="op">&gt;</span>; and a Python version</span>
<span id="cb74-13"><a href="#cb74-13"></a>   Please write DOIs as <span class="op">&lt;</span>doi<span class="op">:</span><span class="fl">10.</span>prefix<span class="op">/</span>suffix<span class="op">&gt;</span>.</span>
<span id="cb74-14"><a href="#cb74-14"></a></span>
<span id="cb74-15"><a href="#cb74-15"></a>Please do not use directed quotes as <span class="cf">in</span> “K–S statistic” <span class="cf">in</span> the</span>
<span id="cb74-16"><a href="#cb74-16"></a>Description but undirected ones, i.e. <span class="st">&quot;KS....&quot;</span>.</span></code></pre></div>
<ul>
<li>Use undirected quotes, Kolmogorov-Smirnov (K-S) statistic instead of “K–S statistic”.</li>
</ul>
</div>
<div id="python-包也用单引号" class="section level1">
<h1><span class="header-section-number">46</span> Python 包也用单引号</h1>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>Please single quote softare names such as <span class="st">&#39;Python&#39;</span> <span class="cf">in</span> the Description field</span></code></pre></div>
<p><del>a Python version</del> ‘pyks’ <a href="https://pypi.org/project/pyks/" class="uri">https://pypi.org/project/pyks/</a></p>
<ul>
<li>Quote softare names in the right way.</li>
</ul>
</div>
<div id="使用拼写检查就会产生test" class="section level1">
<h1><span class="header-section-number">47</span> 使用拼写检查就会产生test</h1>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">use_spell_check</span>()</span>
<span id="cb76-2"><a href="#cb76-2"></a>✔ Setting active project to <span class="st">&#39;D:/work/add2pkg&#39;</span></span>
<span id="cb76-3"><a href="#cb76-3"></a>✔ Adding <span class="st">&#39;spelling&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb76-4"><a href="#cb76-4"></a>✔ Setting Language field <span class="cf">in</span> DESCRIPTION to <span class="st">&#39;en-US&#39;</span></span>
<span id="cb76-5"><a href="#cb76-5"></a>No changes required to D<span class="op">:</span>\work\add2pkg\inst\WORDLIST</span>
<span id="cb76-6"><a href="#cb76-6"></a>Updated D<span class="op">:</span><span class="er">/</span>work<span class="op">/</span>add2pkg<span class="op">/</span>tests<span class="op">/</span>spelling.R</span>
<span id="cb76-7"><a href="#cb76-7"></a>● Run <span class="st">`</span><span class="dt">devtools::check()</span><span class="st">`</span> to trigger spell check</span></code></pre></div>
</div>
<div id="不要重复上传" class="section level1">
<h1><span class="header-section-number">48</span> 不要重复上传</h1>
<pre><code>The Server already contains a file with that name/version, please increase version number</code></pre>
</div>
<div id="复制功能的取舍" class="section level1">
<h1><span class="header-section-number">49</span> 复制功能的取舍</h1>
<p>复制功能在 rhub 测试时，因为系统不一样容易报错。</p>
<p>增加一个 <code>is_paste</code> 方便构建测试。</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>ERRORS<span class="op">:</span></span>
<span id="cb78-2"><a href="#cb78-2"></a><span class="er">*</span><span class="st"> </span>checking examples ... ERROR</span>
<span id="cb78-3"><a href="#cb78-3"></a>Running examples <span class="cf">in</span> ‘add2bibtex<span class="op">-</span>Ex.R’ failed</span>
<span id="cb78-4"><a href="#cb78-4"></a>The error most likely occurred <span class="cf">in</span><span class="op">:</span></span>
<span id="cb78-5"><a href="#cb78-5"></a></span>
<span id="cb78-6"><a href="#cb78-6"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">### Name: add_bibtex</span></span>
<span id="cb78-7"><a href="#cb78-7"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">### Title: Bibtex and Biblatex Template</span></span>
<span id="cb78-8"><a href="#cb78-8"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">### Aliases: add_bibtex</span></span>
<span id="cb78-9"><a href="#cb78-9"></a><span class="er">&gt;</span><span class="st"> </span></span>
<span id="cb78-10"><a href="#cb78-10"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">### ** Examples</span></span>
<span id="cb78-11"><a href="#cb78-11"></a><span class="er">&gt;</span><span class="st"> </span></span>
<span id="cb78-12"><a href="#cb78-12"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">add_bibtex</span>(<span class="st">&quot;online&quot;</span>)</span>
<span id="cb78-13"><a href="#cb78-13"></a>Error<span class="op">:</span><span class="st"> </span>Clipboard on X11 requires <span class="st">&#39;xclip&#39;</span> (recommended) or <span class="st">&#39;xsel&#39;</span>.</span>
<span id="cb78-14"><a href="#cb78-14"></a>Execution halted</span>
<span id="cb78-15"><a href="#cb78-15"></a>WARNINGS<span class="op">:</span></span>
<span id="cb78-16"><a href="#cb78-16"></a><span class="er">*</span><span class="st"> </span>checking re<span class="op">-</span>building of vignette outputs ... WARNING</span>
<span id="cb78-17"><a href="#cb78-17"></a><span class="kw">Error</span>(s) <span class="cf">in</span> re<span class="op">-</span>building vignettes<span class="op">:</span></span>
<span id="cb78-18"><a href="#cb78-18"></a><span class="st">  </span>...</span>
<span id="cb78-19"><a href="#cb78-19"></a><span class="op">---</span><span class="st"> </span>re<span class="op">-</span>building ‘intro.Rmd’ using rmarkdown</span>
<span id="cb78-20"><a href="#cb78-20"></a>Quitting from lines <span class="dv">22-23</span> (intro.Rmd) </span>
<span id="cb78-21"><a href="#cb78-21"></a>Error<span class="op">:</span><span class="st"> </span>processing vignette <span class="st">&#39;intro.Rmd&#39;</span> failed with diagnostics<span class="op">:</span></span>
<span id="cb78-22"><a href="#cb78-22"></a>Clipboard on X11 requires <span class="st">&#39;xclip&#39;</span> (recommended) or <span class="st">&#39;xsel&#39;</span>.</span>
<span id="cb78-23"><a href="#cb78-23"></a><span class="op">---</span><span class="st"> </span>failed re<span class="op">-</span>building ‘intro.Rmd’</span>
<span id="cb78-24"><a href="#cb78-24"></a></span>
<span id="cb78-25"><a href="#cb78-25"></a>SUMMARY<span class="op">:</span><span class="st"> </span>processing the following file failed<span class="op">:</span></span>
<span id="cb78-26"><a href="#cb78-26"></a><span class="st">  </span>‘intro.Rmd’</span>
<span id="cb78-27"><a href="#cb78-27"></a></span>
<span id="cb78-28"><a href="#cb78-28"></a>Error<span class="op">:</span><span class="st"> </span>Vignette re<span class="op">-</span>building failed.</span>
<span id="cb78-29"><a href="#cb78-29"></a>Execution halted</span></code></pre></div>
</div>
<div id="mis-spelling-arguement" class="section level1">
<h1><span class="header-section-number">50</span> mis-spelling arguement</h1>
<p>参考 <a href="https://github.com/robbriers/biotic/blob/master/cran-comments.Rmd" class="uri">https://github.com/robbriers/biotic/blob/master/cran-comments.Rmd</a>
可以写</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>  Possibly mis<span class="op">-</span>spelled words <span class="cf">in</span> DESCRIPTION<span class="op">:</span></span>
<span id="cb79-2"><a href="#cb79-2"></a><span class="st">    </span><span class="kw">Github</span> (<span class="dv">2</span><span class="op">:</span><span class="dv">15</span>, <span class="dv">10</span><span class="op">:</span><span class="dv">18</span>)</span>
<span id="cb79-3"><a href="#cb79-3"></a></span>
<span id="cb79-4"><a href="#cb79-4"></a>This is not a mis<span class="op">-</span>spelling.</span></code></pre></div>
</div>
<div id="mis-spelling" class="section level1">
<h1><span class="header-section-number">51</span> mis-spelling</h1>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>  New submission</span>
<span id="cb80-2"><a href="#cb80-2"></a> </span>
<span id="cb80-3"><a href="#cb80-3"></a>  Possibly mis<span class="op">-</span>spelled words <span class="cf">in</span> DESCRIPTION<span class="op">:</span></span>
<span id="cb80-4"><a href="#cb80-4"></a><span class="st">    </span><span class="kw">GitBook</span> (<span class="dv">2</span><span class="op">:</span><span class="dv">15</span>, <span class="dv">10</span><span class="op">:</span><span class="dv">46</span>)</span>
<span id="cb80-5"><a href="#cb80-5"></a>    <span class="kw">RMarkdown</span> (<span class="dv">10</span><span class="op">:</span><span class="dv">22</span>)</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>GitBook -&gt; git book</li>
<li>RMarkdown -&gt; R markdown</li>
</ol>
</div>
<div id="子路径内存太大" class="section level1">
<h1><span class="header-section-number">52</span> 子路径内存太大</h1>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">---------------------------------</span><span class="st"> </span>add2datacamp <span class="dv">0</span>.<span class="fl">1.1</span> <span class="op">----</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">41.7</span>s</span>
<span id="cb81-3"><a href="#cb81-3"></a></span>
<span id="cb81-4"><a href="#cb81-4"></a><span class="op">&gt;</span><span class="st"> </span>checking installed package size ... NOTE</span>
<span id="cb81-5"><a href="#cb81-5"></a>    installed size is  <span class="fl">6.5</span>Mb</span>
<span id="cb81-6"><a href="#cb81-6"></a>    sub<span class="op">-</span>directories of 1Mb or more<span class="op">:</span></span>
<span id="cb81-7"><a href="#cb81-7"></a><span class="st">      </span>doc      <span class="fl">3.7</span>Mb</span>
<span id="cb81-8"><a href="#cb81-8"></a>      figure   <span class="fl">2.7</span>Mb</span></code></pre></div>
</div>
<div id="函数说明不要太长" class="section level1">
<h1><span class="header-section-number">53</span> 函数说明不要太长</h1>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="op">--</span><span class="st"> </span>R CMD check results <span class="op">---------------------------------</span><span class="st"> </span>add2datacamp <span class="dv">0</span>.<span class="fl">1.1</span> <span class="op">----</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>Duration<span class="op">:</span><span class="st"> </span><span class="fl">50.4</span>s</span>
<span id="cb82-3"><a href="#cb82-3"></a></span>
<span id="cb82-4"><a href="#cb82-4"></a><span class="op">&gt;</span><span class="st"> </span>checking Rd line widths ... NOTE</span>
<span id="cb82-5"><a href="#cb82-5"></a>  Rd file <span class="st">&#39;download_datacamp_slides.Rd&#39;</span><span class="op">:</span></span>
<span id="cb82-6"><a href="#cb82-6"></a><span class="st">    </span>\usage lines wider than <span class="dv">90</span> characters<span class="op">:</span></span>
<span id="cb82-7"><a href="#cb82-7"></a><span class="st">         </span><span class="kw">download_datacamp_slides</span>(<span class="dt">input =</span> <span class="st">&quot;https://s3.amazonaws.com/assets.datacamp.com/production/course_15268/slides/chapter{1:4}.pdf&quot;</span>,</span></code></pre></div>
<p>但是如果链接很长怎么办？
处理方法</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="st">&quot;https://s3.amazonaws.com/assets.datacamp.com/production/course_15268/slides/chapter1.pdf&quot;</span> <span class="op">==</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="st">  </span><span class="kw">file.path</span>(</span>
<span id="cb83-3"><a href="#cb83-3"></a>    <span class="st">&quot;https://s3.amazonaws.com/assets.datacamp.com/production&quot;</span>,</span>
<span id="cb83-4"><a href="#cb83-4"></a>    <span class="st">&quot;course_15268/slides/chapter1.pdf&quot;</span></span>
<span id="cb83-5"><a href="#cb83-5"></a>  )</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="更新-license-年份" class="section level1">
<h1><span class="header-section-number">54</span> 更新 LICENSE 年份</h1>
<pre><code>Should the year of the LICENSE file be updated?</code></pre>
</div>
<div id="合理写-title" class="section level1">
<h1><span class="header-section-number">55</span> 合理写 title</h1>
<pre><code>&quot;The mandatory ‘Title’ field should give a short description of the package&quot;
Please choose a more meaningful title.</code></pre>
<blockquote>
<p>The Title field should give a short description of the package. It should be capitalized, not use any markup, not have any continuation lines, <strong>and not end in a period</strong>. Older versions of R used a separate file TITLE for giving this information; this is now defunct, and the Title field in DESCRIPTION is required.</p>
</blockquote>
<p>参考 <a href="https://cran.r-project.org/web/packages/knitr/index.html" class="uri">https://cran.r-project.org/web/packages/knitr/index.html</a></p>
<p>add2pkg:
A Assistant Package for Package Development in R</p>
</div>
<div id="写函数的-return" class="section level1">
<h1><span class="header-section-number">56</span> 写函数的 return</h1>
<pre><code>Please add \value to .Rd files regarding exported methods and explain
the functions results in the documentation.
(See: Writing R Extensions
&lt;https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions&amp;gt;
)
If a function does not return a value, please document that too, e.g.
\value{None}.</code></pre>
<p>这只是针对 <code>@export</code> 的(<code>regarding exported methods</code>)</p>
<p>加入<code>@return</code>，参考 <a href="http://r-pkgs.had.co.nz/man.html" class="uri">http://r-pkgs.had.co.nz/man.html</a>
如果为空，写入 <code>@return None</code></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co">#&#39; @return If all inputs are integer and logical, then the output</span></span>
<span id="cb88-2"><a href="#cb88-2"></a><span class="co">#&#39;   will be an integer. If integer overflow</span></span>
<span id="cb88-3"><a href="#cb88-3"></a><span class="co">#&#39;   \url{http://en.wikipedia.org/wiki/Integer_overflow} occurs, the output</span></span>
<span id="cb88-4"><a href="#cb88-4"></a><span class="co">#&#39;   will be NA with a warning. Otherwise it will be a length-one numeric or</span></span>
<span id="cb88-5"><a href="#cb88-5"></a><span class="co">#&#39;   complex vector.</span></span>
<span id="cb88-6"><a href="#cb88-6"></a><span class="co">#&#39;</span></span>
<span id="cb88-7"><a href="#cb88-7"></a><span class="co">#&#39;   Zero-length vectors have sum 0 by definition. See</span></span>
<span id="cb88-8"><a href="#cb88-8"></a><span class="co">#&#39;   \url{http://en.wikipedia.org/wiki/Empty_sum} for more details.</span></span></code></pre></div>
</div>
<div id="增加-verbose" class="section level1">
<h1><span class="header-section-number">57</span> 增加 verbose</h1>
<pre><code>You write information messages to the console that cannot be easily
suppressed.
It is more R like to generate objects that can be used to extract the
information a user is interested in, and then print() that object.
Instead of print()/cat() rather use message()/warning()  or
if(verbose)cat(..) if you really have to write text to the console.
(except for print() and summary() functions)

Please fix and resubmit.

Best,
Martina Schmirl</code></pre>
<p>使用 <code>if(verbose)</code>cat(…) 打印信息。</p>
</div>
<div id="missing-name-and-title" class="section level1">
<h1><span class="header-section-number">58</span> missing name and title</h1>
<pre><code>Writing NAMESPACE
Warning message:
which_license.Rd is missing name/title. Skipping</code></pre>
<p>函数没有加 title。</p>
</div>
<div id="warning-example-doesnt-exist" class="section level1">
<h1><span class="header-section-number">59</span> warning example doesn’t exist</h1>
<p>参考 <a href="https://support.bioconductor.org/p/102575/" class="uri">https://support.bioconductor.org/p/102575/</a></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a><span class="co">#&#39; @examples \dontrun{add_me()}</span></span></code></pre></div>
</div>
<div id="desc-不用-title-case" class="section level1">
<h1><span class="header-section-number">60</span> DESC 不用 title case</h1>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>Thanks,</span>
<span id="cb92-2"><a href="#cb92-2"></a></span>
<span id="cb92-3"><a href="#cb92-3"></a>Please do not use title case <span class="cf">in</span> the description.</span>
<span id="cb92-4"><a href="#cb92-4"></a>Also please add more detail to the description.</span></code></pre></div>
</div>
<div id="github-等名字用引号括起来" class="section level1">
<h1><span class="header-section-number">61</span> GitHub 等名字用引号括起来</h1>
<pre><code>Thanks,

Please always write package names, software names and API names in
single quotes in title and description. e.g: --&gt; &#39;add2gh&#39;</code></pre>
</div>
<div id="外部文件如何写-vignette" class="section level1">
<h1><span class="header-section-number">62</span> 外部文件如何写 vignette</h1>
<pre><code>Please add small files needed for the examples in the inst/extdata
subfolder of your package and use system.file() to get the correct
package path.</code></pre>
<p><code>system.file()</code> 反馈的是路径。</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="kw">dir.create</span>(<span class="st">&quot;inst/extdata&quot;</span>)</span></code></pre></div>
<p>参考 <a href="https://stackoverflow.com/questions/13463103/inst-and-extdata-folders-in-r-packaging" class="uri">https://stackoverflow.com/questions/13463103/inst-and-extdata-folders-in-r-packaging</a>
例如 add2ggplot 包，这样写</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="kw">add_logo</span>(</span>
<span id="cb96-2"><a href="#cb96-2"></a>  <span class="dt">plot_path =</span> <span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;logo.png&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;add2ggplot&quot;</span>),</span>
<span id="cb96-3"><a href="#cb96-3"></a>  <span class="dt">logo_path =</span> <span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;jiaxiang.png&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;add2ggplot&quot;</span>),</span>
<span id="cb96-4"><a href="#cb96-4"></a>  <span class="dt">logo_position =</span> <span class="st">&quot;bottom right&quot;</span>,</span>
<span id="cb96-5"><a href="#cb96-5"></a>  <span class="dt">logo_scale =</span> <span class="dv">5</span></span>
<span id="cb96-6"><a href="#cb96-6"></a>)</span></code></pre></div>
<p>在 vignette 些例子。</p>
<p>写可以共享的路径地址。</p>
<pre><code>Please ensure that your functions do not write by default or in your
examples/vignettes/tests in the user&#39;s homspace filee (including the
package directory and getwd()). That is not allowed by CRAN policies.
Please only write/save files if the user has specified a directory in
the function themselves. Therefore please omit any default path =
getwd() in writing functions.
In your examples/vignettes/tests you can write to tempdir().</code></pre>
<p>检查</p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
examples/</li>
<li><input type="checkbox" disabled="" checked="" />
vignettes/</li>
<li><del>tests</del></li>
</ul>
</div>
<div id="dontrun-只用一个" class="section level1">
<h1><span class="header-section-number">63</span> dontrun 只用一个</h1>
<pre><code>(It also cannot work that way anyway as 1 \dontrun{} should be wrapped
around all the code that should not be run - not one per line)

Please fix and resubmit.

Best,
Martina Schmirl</code></pre>
</div>
<div id="export-函数的要求" class="section level1">
<h1><span class="header-section-number">64</span> export 函数的要求</h1>
<pre><code>Please add small executable examples in your Rd-files to illustrate the
use of the exported function but also enable automatic testing.</code></pre>
<p>放 export 都要给 examples
那些使用 addin 的，把<code>@export</code>删除。
没有准备好的函数，先不要 export，平时<code>:::</code>调用就好了。</p>
</div>
<div id="xclip-的问题" class="section level1">
<h1><span class="header-section-number">65</span> xclip 的问题</h1>
<p>加入一个<code>is_paste</code>进行逃避。
然后 <code>@param</code> 进行解释。</p>
<pre><code>All packages used in the package need to be listed in the DESCRIPTION
file either in &#39;Depends&#39;, &#39;Suggests&#39;, &#39;Imports&#39;, &#39;Enhances&#39;.
(See Writing R Extenstion
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-Dependencies)

e.g. &#39;xclip&#39; or &#39;xsel&#39; for build_iframe()</code></pre>
</div>
<div id="donttest" class="section level1">
<h1><span class="header-section-number">66</span> donttest</h1>
<pre><code>\dontrun{} should only be used if the example really cannot be executed
(e.g. because of missing additional software, missing API keys, ...) by
the user. That&#39;s why wrapping examples in \dontrun{} adds the comment
(&quot;# Not run:&quot;) as a warning for the user.
Does not seem necessary.
Please replace \dontrun with \donttest.

Please fix and resubmit.

Best,
Martina Schmirl</code></pre>
</div>
<div id="addin-check-报错" class="section level1">
<h1><span class="header-section-number">67</span> addin check 报错</h1>
<p>直接不要 export</p>
<pre><code>-- R CMD check results --------------------------------------- add2md 1.1.1 ----
Duration: 1m 44.4s

&gt; checking examples ... ERROR
  Running examples in &#39;add2md-Ex.R&#39; failed
  The error most likely occurred in:
  
  &gt; base::assign(&quot;.ptime&quot;, proc.time(), pos = &quot;CheckExEnv&quot;)
  &gt; ### Name: diagrammer_shortcut
  &gt; ### Title: Quick paste a DiagrammeR template
  &gt; ### Aliases: diagrammer_shortcut
  &gt; 
  &gt; ### ** Examples
  &gt; 
  &gt; diagrammer_shortcut()
  Error: RStudio not running
  Execution halted

1 error x | 0 warnings &lt;U+2713&gt; | 0 notes &lt;U+2713&gt;</code></pre>
<p>我之前提问过这个问题
<a href="https://community.rstudio.com/t/use-check-and-get-error-about-ex-r/18263/4" class="uri">https://community.rstudio.com/t/use-check-and-get-error-about-ex-r/18263/4</a></p>
<p>但是不是重新启动的问题啊，我是用快捷键的，这是干净的呀。</p>
<p>Running examples in ‘-Ex.R’ failed The error most likely occurred in rstudio.dcf</p>
<p>没有找到解决办法。</p>
</div>
<div id="example-和-vignette-写-library" class="section level1">
<h1><span class="header-section-number">68</span> example 和 vignette 写 library</h1>
<pre><code>-- R CMD check results ---------------------------------------- rawKS 0.1.0 ----
Duration: 3m 5s

&gt; checking for unstated dependencies in examples ... WARNING
  &#39;library&#39; or &#39;require&#39; call not declared from: &#39;tidyverse&#39;</code></pre>
<p>就是是在 examples 里面也要写在 imports。</p>
<pre><code>&gt; checking for unstated dependencies in vignettes ... NOTE
  &#39;library&#39; or &#39;require&#39; call not declared from: &#39;tidyverse&#39;

0 errors &lt;U+2713&gt; | 1 warning x | 2 notes x</code></pre>
</div>
<div id="unable-to-verify-current-time" class="section level1">
<h1><span class="header-section-number">69</span> unable to verify current time</h1>
<pre><code>&gt; checking for future file timestamps ... NOTE
  unable to verify current time</code></pre>
<p>相关问题
<a href="https://community.rstudio.com/t/r-devel-r-cmd-check-failing-because-of-time-unable-to-verify-current-time/25589/3" class="uri">https://community.rstudio.com/t/r-devel-r-cmd-check-failing-because-of-time-unable-to-verify-current-time/25589/3</a>
<a href="https://stat.ethz.ch/pipermail/r-package-devel/2019q1/003577.html" class="uri">https://stat.ethz.ch/pipermail/r-package-devel/2019q1/003577.html</a></p>
</div>
<div id="打开-github-pages" class="section level1">
<h1><span class="header-section-number">70</span> 打开 GitHub Pages</h1>
<p>参考 <a href="https://github.com/r-lib/gh/issues/107" class="uri">https://github.com/r-lib/gh/issues/107</a></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a>gh<span class="op">::</span><span class="kw">gh</span>(</span>
<span id="cb106-2"><a href="#cb106-2"></a>  <span class="st">&quot;POST /repos/:owner/:repo/pages&quot;</span>, </span>
<span id="cb106-3"><a href="#cb106-3"></a>  <span class="dt">owner =</span> <span class="st">&quot;JiaxiangBU&quot;</span>, </span>
<span id="cb106-4"><a href="#cb106-4"></a>  <span class="dt">repo =</span> <span class="st">&quot;test-gh&quot;</span>, </span>
<span id="cb106-5"><a href="#cb106-5"></a>  <span class="dt">source =</span> <span class="kw">list</span>(<span class="dt">branch =</span> jsonlite<span class="op">::</span><span class="kw">unbox</span>(<span class="st">&quot;master&quot;</span>), <span class="dt">path =</span> jsonlite<span class="op">::</span><span class="kw">unbox</span>(<span class="st">&quot;&quot;</span>)), </span>
<span id="cb106-6"><a href="#cb106-6"></a>  <span class="dt">.send_headers =</span> <span class="kw">c</span>(<span class="dt">Accept =</span> <span class="st">&quot;application/vnd.github.switcheroo-preview+json&quot;</span>)</span>
<span id="cb106-7"><a href="#cb106-7"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a>Error <span class="cf">in</span> <span class="kw">gh_process_response</span>(raw) <span class="op">:</span><span class="st"> </span>GitHub API <span class="kw">error</span> (<span class="dv">422</span>)<span class="op">:</span><span class="st"> </span><span class="dv">422</span> Unprocessable Entity Message<span class="op">:</span><span class="st"> </span>Invalid request. <span class="op">/</span><span class="st"> </span>is not a member of [<span class="st">&quot;&quot;</span>, <span class="st">&quot;/docs&quot;</span>]. Read more at https<span class="op">:</span><span class="er">//</span>developer.github.com<span class="op">/</span>v3<span class="op">/</span>repos<span class="op">/</span>pages<span class="op">/</span><span class="co">#enable-a-pages-site</span></span></code></pre></div>
<p>因此只有<code>["", "/docs"]</code>两种情况。</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb108-1"><a href="#cb108-1"></a><span class="fu">{</span></span>
<span id="cb108-2"><a href="#cb108-2"></a>  <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://api.github.com/repos/JiaxiangBU/test-gh/pages&quot;</span><span class="fu">,</span></span>
<span id="cb108-3"><a href="#cb108-3"></a>  <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb108-4"><a href="#cb108-4"></a>  <span class="dt">&quot;cname&quot;</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb108-5"><a href="#cb108-5"></a>  <span class="dt">&quot;custom_404&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb108-6"><a href="#cb108-6"></a>  <span class="dt">&quot;html_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://jiaxiangbu.github.io/test-gh/&quot;</span><span class="fu">,</span></span>
<span id="cb108-7"><a href="#cb108-7"></a>  <span class="dt">&quot;source&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb108-8"><a href="#cb108-8"></a>    <span class="dt">&quot;branch&quot;</span><span class="fu">:</span> <span class="st">&quot;master&quot;</span><span class="fu">,</span></span>
<span id="cb108-9"><a href="#cb108-9"></a>    <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;/&quot;</span></span>
<span id="cb108-10"><a href="#cb108-10"></a>  <span class="fu">}</span></span>
<span id="cb108-11"><a href="#cb108-11"></a><span class="fu">}</span> </span></code></pre></div>
<p>The README.md is valid, <a href="https://jiaxiangbu.github.io/test-gh/README.md" class="uri">https://jiaxiangbu.github.io/test-gh/README.md</a>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dir.create</span>(<span class="st">&quot;docs&quot;</span>)</span>
<span id="cb109-2"><a href="#cb109-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">file.edit</span>(<span class="st">&quot;docs/index.html&quot;</span>)</span>
<span id="cb109-3"><a href="#cb109-3"></a><span class="op">&gt;</span><span class="st"> </span>git2r<span class="op">::</span><span class="kw">add</span>(<span class="dt">path =</span> <span class="st">&quot;docs/&quot;</span>)</span>
<span id="cb109-4"><a href="#cb109-4"></a><span class="op">&gt;</span><span class="st"> </span>git2r<span class="op">::</span><span class="kw">commit</span>(<span class="dt">message =</span> <span class="st">&quot;add index.html&quot;</span>)</span>
<span id="cb109-5"><a href="#cb109-5"></a>[0fa6c7b] <span class="dv">2020-02-06</span><span class="op">:</span><span class="st"> </span>add index.html</span>
<span id="cb109-6"><a href="#cb109-6"></a><span class="op">&gt;</span><span class="st"> </span>git2r<span class="op">::</span><span class="kw">push</span>(<span class="dt">name =</span> <span class="st">&#39;origin&#39;</span>, <span class="dt">refspec =</span> <span class="st">&quot;refs/heads/master&quot;</span>, <span class="dt">cred =</span> git2r<span class="op">::</span><span class="kw">cred_token</span>())</span></code></pre></div>
<p>生成 docs</p>
</div>
<div id="审核成功" class="section level1">
<h1><span class="header-section-number">71</span> 审核成功</h1>
<pre><code>Thanks,
on its way to CRAN.

Best,
Martina Schmirl</code></pre>
</div>
<div id="发布-r-cran-后续-workflow" class="section level1">
<h1><span class="header-section-number">72</span> 发布 R CRAN 后续 workflow</h1>
<ol style="list-style-type: decimal">
<li><p>发布博客
把 md 复制粘贴到正文，并且加上 R CRAN 的链接。</p></li>
<li><p>比如更新 README 模板，加入 R CRAN 的安装代码</p></li>
<li><p>如果是 Python 包，通过 setting 更新 desc</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a>add2pkg<span class="op">:::</span><span class="kw">setting2desc</span>()</span></code></pre></div></li>
<li><p>Update NEWS <a href="#news">14</a></p></li>
<li><p>release 产生 DOI 和 Citation 更新 R CRAN</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a>usethis<span class="op">::</span><span class="kw">use_github_release</span>()</span></code></pre></div>
<p>不用慌，可以再修改的，只会生成这样一个 untagged 的链接
<a href="https://github.com/JiaxiangBU/rawKS/releases/tag/untagged-5dcfe009af815378d0b1" class="uri">https://github.com/JiaxiangBU/rawKS/releases/tag/untagged-5dcfe009af815378d0b1</a>
确保 zenodo 打开。</p></li>
</ol>
</div>
<div id="str_right_space" class="section level1">
<h1><span class="header-section-number">73</span> str_right_space</h1>
<p>这个空格问题，转换成 unicode 然后合并到 archive 函数，<strong>先不要嵌套到函数中，DOT</strong>，分开开发。</p>
</div>
<div id="devtools-2.2.2" class="section level1">
<h1><span class="header-section-number">74</span> devtools 2.2.2</h1>
<ol style="list-style-type: decimal">
<li><code>submit_cran()</code> now returns a more informative error when the CRAN submission portal is down</li>
<li><code>release()</code> now works if the package root is not in the working directory.</li>
</ol>
</div>
<div id="变量参数加上vars" class="section level1">
<h1><span class="header-section-number">75</span> 变量参数加上<code>vars</code></h1>

<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figure/IMG_0276.png&quot;</span>)</span>
<span id="cb113-2"><a href="#cb113-2"></a>plot_mpg &lt;-<span class="st"> </span><span class="cf">function</span>(col_var, facet_var) {</span>
<span id="cb113-3"><a href="#cb113-3"></a>    <span class="kw">ggplot</span>(mpg) <span class="op">+</span></span>
<span id="cb113-4"><a href="#cb113-4"></a><span class="st">        </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(displ, hwy, <span class="dt">col =</span> .data[[col_var]])) <span class="op">+</span></span>
<span id="cb113-5"><a href="#cb113-5"></a><span class="st">        </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(.data[[facet_var]]))</span>
<span id="cb113-6"><a href="#cb113-6"></a>}</span>
<span id="cb113-7"><a href="#cb113-7"></a><span class="kw">plot_mpg</span>(<span class="dt">col_var =</span> <span class="st">&#39;class&#39;</span>, <span class="dt">facet_var =</span> <span class="st">&#39;drv&#39;</span>)</span>
<span id="cb113-8"><a href="#cb113-8"></a>plot_mpg &lt;-<span class="st"> </span><span class="cf">function</span>(.data, col_var, facet_var) {</span>
<span id="cb113-9"><a href="#cb113-9"></a>    <span class="kw">ggplot</span>(.data) <span class="op">+</span></span>
<span id="cb113-10"><a href="#cb113-10"></a><span class="st">        </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(displ, hwy, <span class="dt">col =</span> .data[[col_var]])) <span class="op">+</span></span>
<span id="cb113-11"><a href="#cb113-11"></a><span class="st">        </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(.data[[facet_var]]))</span>
<span id="cb113-12"><a href="#cb113-12"></a>}</span>
<span id="cb113-13"><a href="#cb113-13"></a>mpg <span class="op">%&gt;%</span></span>
<span id="cb113-14"><a href="#cb113-14"></a><span class="st">    </span><span class="kw">plot_mpg</span>(<span class="dt">col_var =</span> <span class="st">&#39;class&#39;</span>, <span class="dt">facet_var =</span> <span class="st">&#39;drv&#39;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:var-arg-plot"></span>
<img src="figure/IMG_0276.png" alt="这样可以避免输入是文本时，需要调用 eval 和 parse写表达式 (Dunnington 2020)" width="33%" /><img src="cookbook_files/figure-html/var-arg-plot-2.png" alt="这样可以避免输入是文本时，需要调用 eval 和 parse写表达式 (Dunnington 2020)" width="33%" /><img src="cookbook_files/figure-html/var-arg-plot-3.png" alt="这样可以避免输入是文本时，需要调用 eval 和 parse写表达式 (Dunnington 2020)" width="33%" />
<p class="caption">
Figure 75.1: 这样可以避免输入是文本时，需要调用 <code>eval</code> 和 <code>parse</code>写表达式 <span class="citation">(Dunnington 2020)</span>
</p>
</div>
</div>
<div id="查看包结构" class="section level1">
<h1><span class="header-section-number">76</span> 查看包结构</h1>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a>fs<span class="op">::</span><span class="kw">dir_tree</span>(<span class="kw">find.package</span>(<span class="st">&quot;rhub&quot;</span>))</span></code></pre></div>
<pre><code>## C:/Program Files/R/R-3.6.0/library/rhub
## +-- bin
## |   +-- rhub-linux-docker.sh
## |   \-- rhub-linux.sh
## +-- DESCRIPTION
## +-- doc
## |   +-- index.html
## |   +-- local-debugging.html
## |   +-- local-debugging.R
## |   +-- local-debugging.Rmd
## |   +-- rhub.html
## |   +-- rhub.R
## |   \-- rhub.Rmd
## +-- help
## |   +-- aliases.rds
## |   +-- AnIndex
## |   +-- figures
## |   |   \-- logo.png
## |   +-- paths.rds
## |   +-- rhub.rdb
## |   \-- rhub.rdx
## +-- html
## |   +-- 00Index.html
## |   \-- R.css
## +-- INDEX
## +-- LICENSE
## +-- MD5
## +-- Meta
## |   +-- features.rds
## |   +-- hsearch.rds
## |   +-- links.rds
## |   +-- nsInfo.rds
## |   +-- package.rds
## |   +-- Rd.rds
## |   \-- vignette.rds
## +-- NAMESPACE
## +-- NEWS.md
## \-- R
##     +-- rhub
##     +-- rhub.rdb
##     \-- rhub.rdx</code></pre>
</div>
<div id="查询-vignette" class="section level1">
<h1><span class="header-section-number">77</span> 查询 vignette</h1>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a><span class="kw">vignette</span>(<span class="dt">package =</span> <span class="st">&quot;rhub&quot;</span>)</span>
<span id="cb116-2"><a href="#cb116-2"></a><span class="kw">browseVignettes</span>(<span class="dt">package =</span> <span class="st">&quot;rhub&quot;</span>)</span></code></pre></div>
</div>
<div id="vignette-和-suggest" class="section level1">
<h1><span class="header-section-number">78</span> vignette 和 suggest</h1>
<blockquote>
<p>that packages used in the vignette need to be listed in DESCRIPTION (under Suggests if they’re only used in the vignette <span class="citation">(Salmon 2020)</span></p>
</blockquote>
<p>只在 vignette 使用的包，只需要放到 suggest。</p>
</div>
<div id="附录" class="section level1 unnumbered">
<h1>附录</h1>
</div>
<div id="参考文献" class="section level1 unnumbered">
<h1>参考文献</h1>
<div id="refs" class="references">
<div id="ref-tidyeval-2">
<p>Developed, RStudio. 2019. “Tidy Evaluation with Rlang Cheat Sheet.” 2019. <a href="https://resources.rstudio.com/rstudio-developed/tidyeval-2">https://resources.rstudio.com/rstudio-developed/tidyeval-2</a>.</p>
</div>
<div id="ref-Dunnington2020">
<p>Dunnington, Dewey. 2020. “Best Practices for Programming with Ggplot2.” rstudio::conf 2020. 2020. <a href="https://resources.rstudio.com/rstudio-conf-2020/best-practices-for-programming-with-ggplot2-dewey-dunnington">https://resources.rstudio.com/rstudio-conf-2020/best-practices-for-programming-with-ggplot2-dewey-dunnington</a>.</p>
</div>
<div id="ref-Salmon2020">
<p>Salmon, Maëlle. 2020. “Optimal Workflows for Package Vignettes.” R-hub blog. 2020. <a href="https://blog.r-hub.io/2020/06/03/vignettes/">https://blog.r-hub.io/2020/06/03/vignettes/</a>.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
